(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[497],{63361(e,t,r){(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function o(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r);return(t>>>0).toString(16)}t.r(n),t.d(n,{AITextArea:()=>Ht,AITextInput:()=>Zt,ASSISTANT_PLUGIN_ID:()=>M,ASSISTANT_PLUGIN_TITLE:()=>H,CALLBACK_EXTENSION_POINT:()=>W,ComponentNodeData:()=>_,DashboardNodeData:()=>Q,DatasourceNodeData:()=>S,EntityNodeData:()=>T,FolderNodeData:()=>x,InvestigationCreatedEvent:()=>G,LIMITS_UPDATED_EVENT:()=>or,LabelNameNodeData:()=>X,LabelValueNodeData:()=>A,OpenAssistantButton:()=>xt,OpenAssistantSplitButton:()=>At,PlaybookNodeData:()=>I,StructuredNodeData:()=>i,TERMS_AND_CONDITIONS_REFRESH_EVENT:()=>Kt,checkLimits:()=>ir,checkTerms:()=>tr,closeAssistant:()=>ae,createAssistantContextItem:()=>N,createTool:()=>nr,emitInvestigationCreated:()=>j,ensureInlineAssistantInitialized:()=>Gt,getExposeAssistantFunctionsConfig:()=>Y,getInlineAssistantFactory:()=>jt,isAssistantAvailable:()=>ee,newFunctionNamespace:()=>z,onInvestigationCreated:()=>F,openAssistant:()=>oe,provideComponents:()=>R,providePageContext:()=>g,provideQuestions:()=>L,setInlineAssistantFactory:()=>Ut,setInlineAssistantInitializer:()=>Vt,toggleAssistant:()=>ie,useAssistant:()=>se,useInlineAssistant:()=>Ft,useLimits:()=>sr,usePageComponents:()=>w,usePageContext:()=>P,useProvidePageContext:()=>$,useProvideQuestions:()=>D,useQuestions:()=>q,useTerms:()=>rr});class a{constructor(e){this.params=e,this.text="",this.id=o(e.id),this.type=e.type}get bypassLimits(){var e;return null!==(e=this.params.bypassLimits)&&void 0!==e&&e}formatForLLM(e){var t,r;return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:null!==(t=this.params.text)&&void 0!==t?t:"",text:null!==(r=this.params.text)&&void 0!==r?r:""}}}equals(e){return e instanceof a&&this.id===e.id&&this.type===e.type}}class i extends a{constructor(e){super({...e,id:o(JSON.stringify(e.data)),type:"structured"}),this.data=e.data}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:this.data}}}const s=r(18531),l=r(85959);var u=t.n(l);const c="__grafanaAssistantPageContextRegistry__",d="grafana-assistant:page-context-registry-changed",O="grafana-assistant:page-context-update",h="grafana-assistant:page-context-remove",p="grafana-assistant:page-context-sync";function f(){return window[c]}function m(e,t=!1){window[c]=e,window.dispatchEvent(new CustomEvent(d)),t||window.dispatchEvent(new CustomEvent(p,{detail:{registry:e}}))}window[c]||(window[c]=[]);let v=!1;function g(e,t){var r;(r=e)instanceof RegExp?r.source:"string"!=typeof r||r&&""!==r.trim()||console.warn("useProvidePageContext: Empty string passed as urlPattern. This will cause the context to not match any pages.");const n={id:y(),urlPattern:e,context:[...t]};m([...f(),n]),window.dispatchEvent(new CustomEvent(O,{detail:n}));const o=e=>{const t=f(),r=t.findIndex(e=>e.id===n.id);if(-1!==r){const n=[...t];n[r]={...n[r],context:[...e]},m(n),window.dispatchEvent(new CustomEvent(O,{detail:n[r]}))}};return o.unregister=()=>{const e=f(),t=e.findIndex(e=>e.id===n.id);-1!==t&&(m(e.filter((e,r)=>r!==t)),window.dispatchEvent(new CustomEvent(h,{detail:{id:n.id}})))},o}v||(v=!0,window.addEventListener(O,e=>{const t=e.detail;if(!t||!t.id)return;const r=f(),n=r.findIndex(e=>e.id===t.id);if(-1!==n){const e=[...r];e[n]=t,m(e,!0)}else m([...r,t],!0)}),window.addEventListener(h,e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.id;if(!r)return;const n=f(),o=n.findIndex(e=>e.id===r);-1!==o&&m(n.filter((e,t)=>t!==o),!0)}),window.addEventListener(p,e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.registry;if(!Array.isArray(r))return;const n=f(),o=new Set(n.map(e=>e.id)),a=r.filter(e=>!o.has(e.id));a.length>0&&m([...n,...a],!0)}));const b=[];function $(e,t=b){const r=(0,l.useRef)(void 0),n=(0,l.useRef)(void 0),o=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{o.current=!1;const a=void 0!==n.current?n.current:t;return r.current=g(e,a),void 0!==n.current&&(n.current=void 0),()=>{var e;null===(e=r.current)||void 0===e||e.unregister(),r.current=void 0}},[e]),(0,l.useEffect)(()=>{!o.current&&r.current&&r.current(t)},[t]),(0,l.useCallback)(e=>{o.current=!0,r.current?r.current(e):n.current=e},[])}function P(e={allowQuestions:!1,allowComponents:!1}){const[t,r]=(0,l.useState)([]),n=(0,s.useLocationService)(),o=(0,l.useRef)("");(0,l.useEffect)(()=>{const e=()=>{const e=function(e){if(!e)return[];const t=[],r=f();for(const n of r)E(e,n.urlPattern)&&t.push(...n.context);return t}(n.getLocation().pathname);r(e)},t=()=>{e()},a=n.getLocationObservable().subscribe(t=>{const r=t.pathname;r!==o.current&&(o.current=r,e())});return window.addEventListener(d,t),window.addEventListener(O,t),window.addEventListener(h,t),window.addEventListener(p,t),e(),()=>{a.unsubscribe(),window.removeEventListener(d,t),window.removeEventListener(O,t),window.removeEventListener(h,t),window.removeEventListener(p,t)}},[n]);let a=t;return e.allowQuestions||(a=a.filter(e=>{var t;return"question"!==(null===(t=e.node.data)||void 0===t?void 0:t.type)})),e.allowComponents||(a=a.filter(e=>{var t;return"component"!==(null===(t=e.node.data)||void 0===t?void 0:t.type)})),a}function y(e="page-context"){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function E(e,t){if(t instanceof RegExp)return t.test(e);if("string"==typeof t){if(!t||""===t.trim())return!1;const r=t.replace(/\*\*/g,"\0DOUBLE_STAR\0").replace(/\*/g,"[^/]*").replace(/\u0000DOUBLE_STAR\u0000/g,".*").replace(/\?/g,".");return new RegExp(`^${r}$`).test(e)}return!1}class _ extends a{constructor(e){const t=e.namespace||"components";super({...e,id:`${t}-${Object.keys(e.components).join("-")}`,type:"component"}),this.components=e.components,this.prompt=e.prompt,this.namespace=t}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:`Custom UI components (${this.namespace})`,prompt:this.prompt?this.prompt+"\n\nIMPORTANT: The instructions and components described above are scoped to this specific context item only. Do not apply them to unrelated queries or components.":""}}}}function w(){const e=P({allowComponents:!0,allowQuestions:!1});return(0,l.useMemo)(()=>{const t={};return e.filter(e=>{var t;return null===(t=e.node.data)||void 0===t?void 0:t.components}).forEach(e=>{const r=e.node.data;if((null==r?void 0:r.components)&&Object.keys(r.components).length>0){const e=r.namespace||r.name||"components";Object.entries(r.components).forEach(([r,n])=>{t[`${e}_${r}`]=n})}}),t},[e])}function R(e,t,r,n=/.*/){if((o=n)instanceof RegExp?".*"===o.source&&""===o.flags:".*"===o||"/.*/"===o){const n=g(/.*/,[N("component",{components:r,prompt:e,namespace:t})]),o=(e,r)=>{n([N("component",{components:e,prompt:r,namespace:t})])};return o.unregister=n.unregister,o}var o;const a=g(/.*/,[N("component",{components:r,prompt:"",namespace:t})]),i=g(n,[N("component",{components:{},prompt:e,namespace:t})]),s=(e,r)=>{a([N("component",{components:e,prompt:"",namespace:t})]),i([N("component",{components:{},prompt:r,namespace:t})])};return s.unregister=()=>{a.unregister(),i.unregister()},s}class Q extends a{constructor(e){super({...e,id:e.dashboardUid,type:"dashboard"}),this.dashboardUid=e.dashboardUid,this.dashboardTitle=e.dashboardTitle,this.folderUid=e.folderUid,this.folderTitle=e.folderTitle,this.text=e.dashboardTitle}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.dashboardTitle,dashboardUid:this.dashboardUid,dashboardTitle:this.dashboardTitle,folderUid:this.folderUid,folderTitle:this.folderTitle,text:this.text}}}}class x extends a{constructor(e){super({...e,id:e.folderUid,type:"dashboard_folder"}),this.text="",this.folderUid=e.folderUid,this.folderTitle=e.folderTitle,this.text=e.folderTitle}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.folderTitle,folderUid:this.folderUid,folderTitle:this.folderTitle,text:this.text}}}}class S extends a{constructor(e){super({...e,id:e.datasourceUid,type:"datasource"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.img=e.img,this.text=e.datasourceName}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.datasourceName,uid:this.datasourceUid,type:this.datasourceType,text:this.text}}}}class T extends a{constructor(e){var t,r,n;super({id:`${e.type}-${e.name}-${[null===(t=e.scope)||void 0===t?void 0:t.env,null===(r=e.scope)||void 0===r?void 0:r.site,null===(n=e.scope)||void 0===n?void 0:n.namespace].filter(Boolean).join("-")}`,type:"entity",title:e.title,hidden:e.hidden,img:e.img,icon:e.icon,text:e.name}),this.entityType=e.type,this.name=e.name,this.scope=e.scope,this.properties=e.properties,this.text=e.name}formatForLLM(e){return{type:"entity",codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.name,text:this.text,type:this.entityType,scope:this.scope,properties:this.properties}}}}class X extends a{constructor(e){super({...e,id:`${e.datasourceUid}-${e.labelName}`,type:"label_name"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.labelName=e.labelName,this.text=e.labelName,this.img=e.img}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.labelName,datasourceUid:this.datasourceUid,datasourceType:this.datasourceType,datasourceName:this.datasourceName,labelName:this.labelName,text:this.text}}}}class A extends a{constructor(e){super({...e,id:`${e.datasourceUid}-${e.labelName}-${e.labelValue}-${e.operator||"="}`,type:"label_value"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.labelName=e.labelName,this.labelValue=e.labelValue,this.text=e.labelValue,this.img=e.img,this.operator=e.operator||"="}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.labelValue,datasourceUid:this.datasourceUid,datasourceType:this.datasourceType,datasourceName:this.datasourceName,labelName:this.labelName,labelValue:this.labelValue,text:this.text,operator:this.operator}}}}function C(e){var t,r,n,o,a;const i=(0,s.getDataSourceSrv)().getInstanceSettings(e);return{datasourceType:null!==(t=null==i?void 0:i.type)&&void 0!==t?t:"unknown",datasourceName:null!==(r=null==i?void 0:i.name)&&void 0!==r?r:e,img:null===(a=null===(o=null===(n=null==i?void 0:i.meta)||void 0===n?void 0:n.info)||void 0===o?void 0:o.logos)||void 0===a?void 0:a.small}}const k={datasource:"database",label_name:"database",label_value:"database",dashboard:"dashboard",dashboard_folder:"folder",unknown:"circle-mono",structured:"gf-grid",component:"gf-grid",entity:"asserts",playbook:"play"};function N(e,t){var r,n,o;const s=function(e,t){switch(e){case"datasource":return new S({...t,...C(t.datasourceUid)});case"label_name":return new X({...t,...C(t.datasourceUid)});case"label_value":return new A({...t,...C(t.datasourceUid)});case"dashboard":return new Q(t);case"dashboard_folder":return new x(t);case"structured":return new i(t);case"component":return new _({...t,hidden:!0});case"entity":return new T(t);case"unknown":return new a(t);default:return console.error(`Unknown context type: ${e}`),new a(t)}}(e,t),l=null!==(r=t.title)&&void 0!==r?r:function(e){var t;return e instanceof i?e.formatForLLM().data.name:null!==(t=e.text)&&void 0!==t?t:"Given Context"}(s),u=null!==(n=t.img)&&void 0!==n?n:function(e){if("img"in e)return e.img}(s);return{node:{id:s.id,name:l,img:u,icon:null!==(o=t.icon)&&void 0!==o?o:k[e],navigable:!1,selectable:!0,data:s},occurrences:[]}}class I extends a{constructor(e){super({...e,id:e.playbookId,type:"playbook",text:e.playbookName}),this.playbookId=e.playbookId,this.playbookName=e.playbookName,this.text=e.playbookName}formatForLLM(e){return{type:this.type,codeElementIds:e,bypassLimits:this.bypassLimits,data:{name:this.playbookName,playbookId:this.playbookId,playbookName:this.playbookName,text:this.text}}}}function L(e,t){const r=y("question"),n=e=>e.map((e,t)=>({node:{id:`question-${r}-${t}`,name:e.title||e.prompt,navigable:!1,selectable:!0,icon:"question-circle",data:{type:"question",prompt:e.prompt,title:e.title,context:e.context||[]}},occurrences:[]})),o=g(e,n(t)),a=e=>{o(n(e))};return a.unregister=o.unregister,a}function D(e,t=[]){const r=(0,l.useMemo)(()=>y("question"),[]),n=e=>e.map((e,t)=>{var n;return{node:{id:`question-${r}-${t}`,name:null!==(n=e.title)&&void 0!==n?n:e.prompt,navigable:!1,selectable:!0,icon:"question-circle",data:{type:"question",prompt:e.prompt,title:e.title,context:e.context||[]}},occurrences:[]}}),o=$(e,n(t));return e=>{o(n(e))}}function q(){const e=P({allowQuestions:!0,allowComponents:!1});return U(e)}const U=e=>e.filter(e=>{var t;return"question"===(null===(t=e.node.data)||void 0===t?void 0:t.type)}).map(e=>{var t,r,n;return{prompt:(null===(t=e.node.data)||void 0===t?void 0:t.prompt)||e.node.name,title:null===(r=e.node.data)||void 0===r?void 0:r.title,context:(null===(n=e.node.data)||void 0===n?void 0:n.context)||[]}}),V=r(87781);class G extends V.BusEventWithPayload{}function j(e){const t=new G({investigationId:e});(0,s.getAppEvents)().publish(t)}function F(e){const t=(0,s.getAppEvents)().subscribe(G,t=>{e(t.payload)});return()=>t.unsubscribe()}G.type="grafana-assistant:investigation-created";const W="grafana-assistant-app/callback/v0-alpha";function z(e,t){return{namespace:e,functions:t}}function Y(e){return{title:"callback",targets:[W],fn:()=>e.map(e=>({namespace:e.namespace,functions:e.functions}))}}const Z=r(31269),M="grafana-assistant-app",H="Grafana Assistant",B=10,J=100,K=5e3;function ee(){return s.getObservablePluginLinks?(0,Z.defer)(()=>{try{return(0,s.getObservablePluginLinks)({extensionPointId:"grafana/extension-sidebar/v0-alpha"}).pipe((0,Z.map)(e=>e.some(e=>e.pluginId===M&&e.title===H)))}catch(e){return(0,Z.throwError)(()=>e)}}).pipe((0,Z.retry)({count:B,delay:(e,t)=>{var r;const n=(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.toLowerCase())||"";if(!(n.includes("can only be used after")||n.includes("grafana instance has started")||n.includes("not started")))throw e;const o=Math.min(J*Math.pow(2,t-1),K);return(0,Z.timer)(o)}}),(0,Z.catchError)(()=>(0,Z.of)(!1))):(0,Z.of)(!1)}class te extends V.BusEventWithPayload{}te.type="open-extension-sidebar";class re extends V.BusEventBase{}re.type="close-extension-sidebar";class ne extends V.BusEventWithPayload{}function oe(e){var t,r;(0,s.reportInteraction)("grafana_assistant_app_opened_sidebar",{from:e.origin,prompt:null!==(t=e.prompt)&&void 0!==t?t:""}),function(e,t,r){const n=new te({pluginId:e,componentTitle:t,props:r});(0,s.getAppEvents)().publish(n)}(M,H,{initialPrompt:e.prompt,initialContext:e.context,initialAutoSend:null===(r=e.autoSend)||void 0===r||r,origin:e.origin,initialMode:e.mode})}function ae(){!function(){const e=new re;(0,s.getAppEvents)().publish(e)}()}function ie(e){var t,r;(0,s.reportInteraction)("grafana_assistant_app_toggled_sidebar",{from:e.origin,prompt:null!==(t=e.prompt)&&void 0!==t?t:""}),function(e,t,r){const n=new ne({pluginId:e,componentTitle:t,props:r});(0,s.getAppEvents)().publish(n)}(M,H,{initialPrompt:e.prompt,initialContext:e.context,initialAutoSend:null===(r=e.autoSend)||void 0===r||r,origin:e.origin,initialMode:e.mode})}function se(){const[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{const e=ee().subscribe(e=>t(e));return()=>{e.unsubscribe()}},[]),{isAvailable:e,openAssistant:e?oe:void 0,closeAssistant:e?ae:void 0,toggleAssistant:e?ie:void 0}}ne.type="toggle-extension-sidebar";const le=r(82007);var ue=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),ce=Math.abs,de=String.fromCharCode,Oe=Object.assign;function he(e){return e.trim()}function pe(e,t,r){return e.replace(t,r)}function fe(e,t){return e.indexOf(t)}function me(e,t){return 0|e.charCodeAt(t)}function ve(e,t,r){return e.slice(t,r)}function ge(e){return e.length}function be(e){return e.length}function $e(e,t){return t.push(e),e}var Pe=1,ye=1,Ee=0,_e=0,we=0,Re="";function Qe(e,t,r,n,o,a,i){return{value:e,root:t,parent:r,type:n,props:o,children:a,line:Pe,column:ye,length:i,return:""}}function xe(e,t){return Oe(Qe("",null,null,"",null,null,0),e,{length:-e.length},t)}function Se(){return we=_e>0?me(Re,--_e):0,ye--,10===we&&(ye=1,Pe--),we}function Te(){return we=_e<Ee?me(Re,_e++):0,ye++,10===we&&(ye=1,Pe++),we}function Xe(){return me(Re,_e)}function Ae(){return _e}function Ce(e,t){return ve(Re,e,t)}function ke(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ne(e){return Pe=ye=1,Ee=ge(Re=e),_e=0,[]}function Ie(e){return Re="",e}function Le(e){return he(Ce(_e-1,Ue(91===e?e+2:40===e?e+1:e)))}function De(e){for(;(we=Xe())&&we<33;)Te();return ke(e)>2||ke(we)>3?"":" "}function qe(e,t){for(;--t&&Te()&&!(we<48||we>102||we>57&&we<65||we>70&&we<97););return Ce(e,Ae()+(t<6&&32==Xe()&&32==Te()))}function Ue(e){for(;Te();)switch(we){case e:return _e;case 34:case 39:34!==e&&39!==e&&Ue(we);break;case 40:41===e&&Ue(e);break;case 92:Te()}return _e}function Ve(e,t){for(;Te()&&e+we!==57&&(e+we!==84||47!==Xe()););return"/*"+Ce(t,_e-1)+"*"+de(47===e?e:Te())}function Ge(e){for(;!ke(Xe());)Te();return Ce(e,_e)}var je="-ms-",Fe="-moz-",We="-webkit-",ze="comm",Ye="rule",Ze="decl",Me="@keyframes";function He(e,t){for(var r="",n=be(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function Be(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Ze:return e.return=e.return||e.value;case ze:return"";case Me:return e.return=e.value+"{"+He(e.children,n)+"}";case Ye:e.value=e.props.join(",")}return ge(r=He(e.children,n))?e.return=e.value+"{"+r+"}":""}function Je(e){return Ie(Ke("",null,null,null,[""],e=Ne(e),0,[0],e))}function Ke(e,t,r,n,o,a,i,s,l){for(var u=0,c=0,d=i,O=0,h=0,p=0,f=1,m=1,v=1,g=0,b="",$=o,P=a,y=n,E=b;m;)switch(p=g,g=Te()){case 40:if(108!=p&&58==me(E,d-1)){-1!=fe(E+=pe(Le(g),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=Le(g);break;case 9:case 10:case 13:case 32:E+=De(p);break;case 92:E+=qe(Ae()-1,7);continue;case 47:switch(Xe()){case 42:case 47:$e(tt(Ve(Te(),Ae()),t,r),l);break;default:E+="/"}break;case 123*f:s[u++]=ge(E)*v;case 125*f:case 59:case 0:switch(g){case 0:case 125:m=0;case 59+c:-1==v&&(E=pe(E,/\f/g,"")),h>0&&ge(E)-d&&$e(h>32?rt(E+";",n,r,d-1):rt(pe(E," ","")+";",n,r,d-2),l);break;case 59:E+=";";default:if($e(y=et(E,t,r,u,c,o,s,b,$=[],P=[],d),a),123===g)if(0===c)Ke(E,t,y,y,$,a,d,s,P);else switch(99===O&&110===me(E,3)?100:O){case 100:case 108:case 109:case 115:Ke(e,y,y,n&&$e(et(e,y,y,0,0,o,s,b,o,$=[],d),P),o,P,d,s,n?$:P);break;default:Ke(E,y,y,y,[""],P,0,s,P)}}u=c=h=0,f=v=1,b=E="",d=i;break;case 58:d=1+ge(E),h=p;default:if(f<1)if(123==g)--f;else if(125==g&&0==f++&&125==Se())continue;switch(E+=de(g),g*f){case 38:v=c>0?1:(E+="\f",-1);break;case 44:s[u++]=(ge(E)-1)*v,v=1;break;case 64:45===Xe()&&(E+=Le(Te())),O=Xe(),c=d=ge(b=E+=Ge(Ae())),g++;break;case 45:45===p&&2==ge(E)&&(f=0)}}return a}function et(e,t,r,n,o,a,i,s,l,u,c){for(var d=o-1,O=0===o?a:[""],h=be(O),p=0,f=0,m=0;p<n;++p)for(var v=0,g=ve(e,d+1,d=ce(f=i[p])),b=e;v<h;++v)(b=he(f>0?O[v]+" "+g:pe(g,/&\f/g,O[v])))&&(l[m++]=b);return Qe(e,t,r,0===o?Ye:s,l,u,c)}function tt(e,t,r){return Qe(e,t,r,ze,de(we),ve(e,2,-2),0)}function rt(e,t,r,n){return Qe(e,t,r,Ze,ve(e,0,n),ve(e,n+1,-1),n)}var nt=function(e,t,r){for(var n=0,o=0;n=o,o=Xe(),38===n&&12===o&&(t[r]=1),!ke(o);)Te();return Ce(e,_e)},ot=new WeakMap,at=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ot.get(r))&&!n){ot.set(e,!0);for(var o=[],a=function(e,t){return Ie(function(e,t){var r=-1,n=44;do{switch(ke(n)){case 0:38===n&&12===Xe()&&(t[r]=1),e[r]+=nt(_e-1,t,r);break;case 2:e[r]+=Le(n);break;case 4:if(44===n){e[++r]=58===Xe()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=de(n)}}while(n=Te());return e}(Ne(e),t))}(t,o),i=r.props,s=0,l=0;s<a.length;s++)for(var u=0;u<i.length;u++,l++)e.props[l]=o[s]?a[s].replace(/&\f/g,i[u]):i[u]+" "+a[s]}}},it=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function st(e,t){switch(function(e,t){return 45^me(e,0)?(((t<<2^me(e,0))<<2^me(e,1))<<2^me(e,2))<<2^me(e,3):0}(e,t)){case 5103:return We+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return We+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return We+e+Fe+e+je+e+e;case 6828:case 4268:return We+e+je+e+e;case 6165:return We+e+je+"flex-"+e+e;case 5187:return We+e+pe(e,/(\w+).+(:[^]+)/,We+"box-$1$2"+je+"flex-$1$2")+e;case 5443:return We+e+je+"flex-item-"+pe(e,/flex-|-self/,"")+e;case 4675:return We+e+je+"flex-line-pack"+pe(e,/align-content|flex-|-self/,"")+e;case 5548:return We+e+je+pe(e,"shrink","negative")+e;case 5292:return We+e+je+pe(e,"basis","preferred-size")+e;case 6060:return We+"box-"+pe(e,"-grow","")+We+e+je+pe(e,"grow","positive")+e;case 4554:return We+pe(e,/([^-])(transform)/g,"$1"+We+"$2")+e;case 6187:return pe(pe(pe(e,/(zoom-|grab)/,We+"$1"),/(image-set)/,We+"$1"),e,"")+e;case 5495:case 3959:return pe(e,/(image-set\([^]*)/,We+"$1$`$1");case 4968:return pe(pe(e,/(.+:)(flex-)?(.*)/,We+"box-pack:$3"+je+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+We+e+e;case 4095:case 3583:case 4068:case 2532:return pe(e,/(.+)-inline(.+)/,We+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ge(e)-1-t>6)switch(me(e,t+1)){case 109:if(45!==me(e,t+4))break;case 102:return pe(e,/(.+:)(.+)-([^]+)/,"$1"+We+"$2-$3$1"+Fe+(108==me(e,t+3)?"$3":"$2-$3"))+e;case 115:return~fe(e,"stretch")?st(pe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==me(e,t+1))break;case 6444:switch(me(e,ge(e)-3-(~fe(e,"!important")&&10))){case 107:return pe(e,":",":"+We)+e;case 101:return pe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+We+(45===me(e,14)?"inline-":"")+"box$3$1"+We+"$2$3$1"+je+"$2box$3")+e}break;case 5936:switch(me(e,t+11)){case 114:return We+e+je+pe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return We+e+je+pe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return We+e+je+pe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return We+e+je+e+e}return e}var lt=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Ze:e.return=st(e.value,e.length);break;case Me:return He([xe(e,{value:pe(e.value,"@","@"+We)})],n);case Ye:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return He([xe(e,{props:[pe(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return He([xe(e,{props:[pe(t,/:(plac\w+)/,":"+We+"input-$1")]}),xe(e,{props:[pe(t,/:(plac\w+)/,":-moz-$1")]}),xe(e,{props:[pe(t,/:(plac\w+)/,je+"input-$1")]})],n)}return""})}}],ut={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ct=/[A-Z]|^ms/g,dt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ot=function(e){return 45===e.charCodeAt(1)},ht=function(e){return null!=e&&"boolean"!=typeof e},pt=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}(function(e){return Ot(e)?e:e.replace(ct,"-$&").toLowerCase()}),ft=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(dt,function(e,t,r){return vt={name:t,styles:r,next:vt},t})}return 1===ut[e]||Ot(e)||"number"!=typeof t||0===t?t:t+"px"};function mt(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var o=r;if(1===o.anim)return vt={name:o.name,styles:o.styles,next:vt},o.name;var a=r;if(void 0!==a.styles){var i=a.next;if(void 0!==i)for(;void 0!==i;)vt={name:i.name,styles:i.styles,next:vt},i=i.next;return a.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=mt(e,t,r[o])+";";else for(var a in r){var i=r[a];if("object"!=typeof i){var s=i;null!=t&&void 0!==t[s]?n+=a+"{"+t[s]+"}":ht(s)&&(n+=pt(a)+":"+ft(a,s)+";")}else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=mt(e,t,i);switch(a){case"animation":case"animationName":n+=pt(a)+":"+l+";";break;default:n+=a+"{"+l+"}"}}else for(var u=0;u<i.length;u++)ht(i[u])&&(n+=pt(a)+":"+ft(a,i[u])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=vt,l=r(e);return vt=s,mt(e,t,l)}}var u=r;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var vt,gt=/label:\s*([^\s;{]+)\s*(;|$)/g;function bt(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,o="";vt=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,o+=mt(r,t,a)):o+=a[0];for(var i=1;i<e.length;i++)o+=mt(r,t,e[i]),n&&(o+=a[i]);gt.lastIndex=0;for(var s,l="";null!==(s=gt.exec(o));)l+="-"+s[1];var u=function(e){for(var t,r=0,n=0,o=e.length;o>=4;++n,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(o){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(o)+l;return{name:u,styles:o,next:vt}}function $t(e,t,r){var n="";return r.split(" ").forEach(function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")}),n}function Pt(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function yt(e,t,r){var n=[],o=$t(e,n,r);return n.length<2?r:o+t(n)}var Et=function e(t){for(var r="",n=0;n<t.length;n++){var o=t[n];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))a=e(o);else for(var i in a="",o)o[i]&&i&&(a&&(a+=" "),a+=i);break;default:a=o}a&&(r&&(r+=" "),r+=a)}}return r},_t=function(){var e=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n,o,a=e.stylisPlugins||lt,i={},s=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)i[t[r]]=!0;s.push(e)});var l,u,c,d,O=[Be,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],h=(u=[at,it].concat(a,O),c=be(u),function(e,t,r,n){for(var o="",a=0;a<c;a++)o+=u[a](e,t,r,n)||"";return o});o=function(e,t,r,n){l=r,He(Je(e?e+"{"+t.styles+"}":t.styles),h),n&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new ue({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:o};return p.sheet.hydrate(s),p}({key:"css"});e.sheet.speedy=function(e){this.isSpeedy=e},e.compat=!0;var t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=bt(r,e.registered,void 0);return function(e,t){!function(e,t){var r=e.key+"-"+t.name;void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+r:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(e,o),e.key+"-"+o.name};return{css:t,cx:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return yt(e.registered,t,Et(n))},injectGlobal:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=bt(r,e.registered);Pt(e,o)},keyframes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=bt(r,e.registered),a="animation-"+o.name;return Pt(e,{name:o.name,styles:"@keyframes "+a+"{"+o.styles+"}"}),a},hydrate:function(t){t.forEach(function(t){e.inserted[t]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:$t.bind(null,e.registered),merge:yt.bind(null,e.registered,t)}}(),wt=(_t.flush,_t.hydrate,_t.cx),Rt=(_t.merge,_t.getRegisteredStyles,_t.injectGlobal,_t.keyframes),Qt=_t.css;function xt(e){const{isAvailable:t,openAssistant:r}=se();return t&&r?u().createElement(St,{...e,openAssistant:r}):null}function St({prompt:e,origin:t,context:r,autoSend:n=!0,title:o="Analyze with Assistant",size:a="sm",iconOnlyButton:i=!1,openAssistant:c,onClick:d}){const O=(0,le.useStyles2)(Tt);return(0,l.useEffect)(()=>{(0,s.reportInteraction)("grafana_assistant_app_open_sidebar_button_displayed",{from:t})},[t]),u().createElement(u().Fragment,null,i?u().createElement(le.IconButton,{name:"ai-sparkle",onClick:()=>{null==d||d(),c({prompt:e,context:r,autoSend:n,origin:t})},variant:"secondary",size:a,"aria-label":o,className:O.icon,tooltip:o,"data-testid":"assistant-icon-button"}):u().createElement(le.Button,{icon:"ai-sparkle",onClick:()=>{null==d||d(),c({prompt:e,context:r,autoSend:n,origin:t})},variant:"secondary",fill:"solid",size:a,title:o,"aria-label":o,className:O.button,"data-testid":"assistant-button"},o))}_t.sheet,_t.cache;const Tt=e=>{const t=e.colors.secondary.main,r=e.colors.emphasize(t,.05),n=e.colors.background.canvas,o=e.shape.radius.default,a=`max(calc(${o} - 1px), 1px)`,i={content:'""',position:"absolute",inset:0,borderRadius:o,cornerShape:"squircle",background:"linear-gradient(90deg, rgb(168, 85, 247), rgb(249, 115, 22))",zIndex:-2,pointerEvents:"none"},s=e=>({content:'""',position:"absolute",inset:"1px",borderRadius:a,cornerShape:"squircle",background:`linear-gradient(${e}, ${e}), ${n}`,zIndex:-1,transition:"none",pointerEvents:"none"});return{button:Qt({label:"assistant-button",position:"relative",isolation:"isolate",border:"none",transition:"none !important","&::before":i,"&::after":{...s(t),transition:"none"},"&:hover":{transition:"none !important"},"&:hover::after":{background:`linear-gradient(${r}, ${r}), ${n}`}}),icon:Qt({label:"assistant-icon",position:"relative",isolation:"isolate",border:"none",background:"none",padding:e.spacing(.5),"&::before":{...i,transition:"background 0.1s ease"},"&:hover::after":{...s(t),background:`linear-gradient(${r}, ${r}), ${n}`}})}},Xt={sm:32,md:36,lg:40};function At(e){const{isAvailable:t,openAssistant:r}=se();return t&&r?u().createElement(Ct,{...e,openAssistant:r}):null}function Ct({prompt:e,origin:t,context:r,autoSend:n=!0,title:o="Chat with Assistant",size:a="sm",onClick:i,menuItems:c,tooltip:d,dropdownButtonWidth:O,openAssistant:h}){const p=(0,le.useStyles2)(kt),f=Boolean(c),m="number"==typeof(v=null!=O?O:Xt[a])?`${v}px`:v;var v;(0,l.useEffect)(()=>{(0,s.reportInteraction)("grafana_assistant_app_open_sidebar_split_button_displayed",{from:t})},[t]);const g=u().createElement("div",{className:p.wrapper},u().createElement(le.ButtonGroup,{className:p.buttonGroup},u().createElement(le.Button,{icon:"ai-sparkle",onClick:()=>{null==i||i(),h({prompt:e,context:r,autoSend:n,origin:t})},variant:"secondary",fill:"solid",size:a,"aria-label":o,className:wt(p.segmentButton,f?p.mainButtonSplit:p.mainButtonSolo),"data-testid":"assistant-split-button-main"},o),c&&u().createElement(le.Dropdown,{overlay:c},u().createElement(le.Button,{variant:"secondary",icon:"angle-down",size:a,"aria-label":"More AI actions",className:wt(p.segmentButton,p.dropdownButton),style:{width:m,minWidth:m},"data-testid":"assistant-split-button-dropdown"}))));return d?u().createElement(le.Tooltip,{content:d},g):g}const kt=e=>{const t=e.colors.secondary.main,r=e.colors.emphasize(t,.05),n=e.colors.background.canvas,o=e.colors.border.weak,a=e.shape.radius.default,i=`max(calc(${a} - 1px), 1px)`;return{wrapper:Qt({label:"assistant-split-button-wrapper",position:"relative",isolation:"isolate",display:"inline-block","&::before":{content:'""',position:"absolute",inset:0,borderRadius:a,cornerShape:"squircle",background:"linear-gradient(90deg, rgb(168, 85, 247), rgb(249, 115, 22))",zIndex:-1,pointerEvents:"none"},"&::after":{content:'""',position:"absolute",inset:"1px",borderRadius:i,cornerShape:"squircle",background:`linear-gradient(${t}, ${t}), ${n}`,zIndex:-1,pointerEvents:"none"}}),buttonGroup:Qt({label:"assistant-split-button-group",gap:0,position:"relative",zIndex:1,borderRadius:i,overflow:"hidden","& button":{border:"none",boxShadow:"none",background:"transparent !important"}}),segmentButton:Qt({label:"assistant-split-button-segment",position:"relative","&:hover":{background:`${r} !important`},"&:focus-visible":{background:`${r} !important`},'&[aria-expanded="true"]':{background:`${r} !important`}}),mainButtonSolo:Qt({label:"assistant-split-button-main-solo",borderRadius:i}),mainButtonSplit:Qt({label:"assistant-split-button-main-split",borderTopLeftRadius:i,borderBottomLeftRadius:i,borderTopRightRadius:0,borderBottomRightRadius:0}),dropdownButton:Qt({label:"assistant-split-button-dropdown",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:0,borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:i,borderBottomRightRadius:i,padding:"0 !important",boxShadow:`inset 1px 0 0 ${o}`,"& svg":{margin:0}})}},Nt=e=>{const t=["rgb(168, 85, 247)","rgb(249, 115, 22)"];if("dark"===e.name.toLowerCase()||"light"===e.name.toLowerCase())return t;const r=e.colors.gradients.brandHorizontal.match(/#[0-9A-Fa-f]{6}/g);return!r||r.length<2?t:[r[0],r[1]]},It=(e,t,r,n)=>{const o=Array.from({length:101},(e,t)=>t),a={},[i,s]=Nt(e),l=null!=r?r:i,u=null!=n?n:s;return o.forEach(e=>{a[`${e}%`]={backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from ${3.6*e}deg, transparent 60%, ${l} 80%, ${u} 100%, transparent 15%)\n      `}}),a},Lt="__grafanaAssistantInlineFactory__",Dt="__grafanaAssistantInlineInitializer__",qt="__grafanaAssistantInlineInitPromise__";function Ut(e){const t=window[Lt];t&&t!==e?console.warn("InlineAssistant factory already set; ignoring subsequent setInlineAssistantFactory call"):t||(window[Lt]=e)}function Vt(e){const t=window[Dt];t&&t!==e?console.warn("InlineAssistant initializer already set; ignoring subsequent setInlineAssistantInitializer call"):t||(window[Dt]=e)}async function Gt(){if(window[Lt])return;const e=window[Dt];if(!e)throw new Error("InlineAssistant not initialized. Make sure the Grafana Assistant plugin is loaded and initialized.");const t=window[qt];if(t)return t;const r=(async()=>{try{await e()}catch(e){throw window[qt]=null,e}})();return window[qt]=r,r}function jt(){const e=window[Lt];if(!e)throw new Error("InlineAssistant factory not initialized. Make sure the Grafana Assistant plugin is loaded.");return e}function Ft(){const[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(""),[o,a]=(0,l.useState)(null),i=(0,l.useRef)(null),s=(0,l.useCallback)(()=>{a(null),n("")},[]),u=(0,l.useCallback)(()=>{i.current&&i.current.cancel(),t(!1)},[]),c=(0,l.useCallback)(async e=>{var r;a(null),n(""),t(!0);try{await Gt();const r=jt();i.current||(i.current=await r(e.origin)),await i.current.sendPrompt({prompt:e.prompt,systemPrompt:e.systemPrompt,tools:e.tools,onStart:()=>{t(!0)},onDelta:t=>{var r;n(e=>e+t),null===(r=e.onDelta)||void 0===r||r.call(e,t)},onComplete:r=>{var o;n(r),t(!1),null===(o=e.onComplete)||void 0===o||o.call(e,r)},onError:r=>{var n;a(r),t(!1),null===(n=e.onError)||void 0===n||n.call(e,r)}})}catch(n){const o=n instanceof Error?n:new Error(String(n));a(o),t(!1),null===(r=e.onError)||void 0===r||r.call(e,o)}},[]);return(0,l.useEffect)(()=>()=>{i.current&&(i.current.cancel(),i.current.dispose(),i.current=null)},[]),{generate:c,isGenerating:e,content:r,error:o,cancel:u,reset:s}}function Wt({value:e,onChange:t,origin:r,systemPrompt:n,onComplete:o,onError:a,onDelta:i,disabled:s=!1,autoGenerate:u=!1,streaming:c=!1}){const{generate:d,isGenerating:O,content:h,error:p,reset:f}=Ft(),m=(0,l.useRef)(!1),v=(0,l.useRef)(e),g=O?c?h:"":e,b=!e.trim()||s||O,$=(0,l.useCallback)(s=>{v.current=e,t(""),f(),d({prompt:s,origin:r,systemPrompt:n,onDelta:i,onComplete:e=>{t(e),null==o||o(e)},onError:e=>{t(v.current),null==a||a(e)}})},[e,t,r,n,i,o,a,d,f]);(0,l.useEffect)(()=>{!u||!n||e||m.current||s||(m.current=!0,$(n))},[]);const P=(0,l.useCallback)(()=>{b||$(e.trim())},[b,$,e]);return{displayValue:g,isSendDisabled:b,handleGenerate:P,isGenerating:O,error:p}}const zt=["Generating...","Brewing...","Cooking...","Crunching...","Phrasing...","Wording...","Crafting...","Composing...","Drafting...","Shaping...","Forming...","Molding...","Sketching...","Whipping up...","Conjuring...","Stirring..."];function Yt(e,t){const[r,n]=(0,l.useState)("");return(0,l.useEffect)(()=>{e&&n(zt[Math.floor(Math.random()*zt.length)])},[e]),e?r:t}function Zt({value:e,onChange:t,placeholder:r,origin:n,systemPrompt:o,onComplete:a,onError:i,onDelta:s,disabled:l=!1,autoGenerate:c=!1,streaming:d=!1,className:O,"data-testid":h}){const{displayValue:p,isSendDisabled:f,handleGenerate:m,isGenerating:v,error:g}=Wt({value:e,onChange:t,origin:n,systemPrompt:o,onComplete:a,onError:i,onDelta:s,disabled:l,autoGenerate:c,streaming:d}),b=(0,le.useStyles2)(Mt),$=Yt(v,null!=r?r:"Ask AI to generate..."),P=u().createElement(le.IconButton,{name:"ai-sparkle",onClick:m,disabled:f,tooltip:f?"Enter text to generate":"Generate with AI","data-testid":h?`${h}-send`:void 0});return u().createElement("div",{className:wt(b.wrapper,{[b.animatedWrapper]:v},O),"data-testid":h},u().createElement(le.Input,{value:p,onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),m())},onChange:e=>t(e.currentTarget.value),placeholder:$,disabled:l||v,suffix:P,invalid:!!g,"data-testid":h?`${h}-input`:void 0}))}const Mt=e=>{const t=e.colors.background.primary,r=Rt({label:"ai-input-border-animation",...It(e,t)}),[n,o]=Nt(e);return{wrapper:Qt({label:"ai-text-input-wrapper",position:"relative",border:"1px solid transparent",borderRadius:e.shape.radius.default,cornerShape:"squircle"}),animatedWrapper:Qt({label:"ai-text-input-animated",border:"1px solid transparent",backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from 0deg, transparent 60%, ${n} 80%, ${o} 100%, transparent 15%)\n      `,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",animation:`${r} 2s linear infinite`,"& input":{border:"none !important"}})}};function Ht({value:e,onChange:t,placeholder:r,origin:n,systemPrompt:o,onComplete:a,onError:i,onDelta:s,disabled:l=!1,autoGenerate:c=!1,streaming:d=!1,rows:O=4,className:h,"data-testid":p}){const{displayValue:f,isSendDisabled:m,handleGenerate:v,isGenerating:g,error:b}=Wt({value:e,onChange:t,origin:n,systemPrompt:o,onComplete:a,onError:i,onDelta:s,disabled:l,autoGenerate:c,streaming:d}),$=(0,le.useStyles2)(Bt),P=Yt(g,null!=r?r:"Ask AI to generate... (Cmd/Ctrl+Enter to send)");return u().createElement("div",{className:wt($.textareaWrapper,{[$.animatedWrapper]:g},h),"data-testid":p},u().createElement(le.TextArea,{value:f,onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),v())},onChange:e=>t(e.currentTarget.value),placeholder:P,disabled:l||g,rows:O,className:$.textarea,invalid:!!b,"data-testid":p?`${p}-textarea`:void 0}),u().createElement(le.IconButton,{name:"ai-sparkle",onClick:v,disabled:m,className:$.sendButton,"aria-label":"Generate with AI",tooltip:m?"Enter text to generate":"Generate with AI (Cmd/Ctrl+Enter)","data-testid":p?`${p}-send`:void 0}))}const Bt=e=>{const t=e.colors.background.primary,r=Rt({label:"ai-textarea-border-animation",...It(e,t)}),[n,o]=Nt(e);return{textareaWrapper:Qt({label:"ai-textarea-wrapper",position:"relative",border:"1px solid transparent",borderRadius:e.shape.radius.default,cornerShape:"squircle"}),animatedWrapper:Qt({label:"ai-textarea-animated",border:"1px solid transparent",backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from 0deg, transparent 60%, ${n} 80%, ${o} 100%, transparent 15%)\n      `,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",animation:`${r} 2s linear infinite`,"& textarea":{border:"none !important"}}),textarea:Qt({label:"ai-textarea",paddingRight:e.spacing(4),scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),sendButton:Qt({label:"ai-textarea-send",position:"absolute",right:e.spacing(1),top:e.spacing(1)})}};function Jt(e){const t=e.split("+")[0].split("-"),r=t[0],n=t.length>1?t.slice(1).join("-"):void 0,o=r.split(".").map(Number);return 3!==o.length||o.some(isNaN)?null:{major:o[0],minor:o[1],patch:o[2],prerelease:n}}const Kt="grafana-assistant-terms-and-conditions-refresh";async function er(){var e,t;const r=(0,s.getBackendSrv)(),n=`${null!==(e=null===s.config||void 0===s.config?void 0:s.config.appSubUrl)&&void 0!==e?e:""}/api/plugins/${M}/resources/api/v1/settings/terms`,o=(await(0,Z.lastValueFrom)(r.fetch({url:n,method:"GET",showErrorAlert:!1}))).data.data,a=null!==(t=o.acceptedTermsAndConditions)&&void 0!==t&&t,i=o.acceptedVersion,l=o.version,u=o.termsType;if("msa"===u)return{accepted:a,termsType:u};if(!a||!i||!l)return{accepted:!1,termsType:u};const c=1===function(e,t){const r=Jt(e),n=Jt(t);return r&&n?r.major!==n.major?r.major>n.major?1:-1:r.minor!==n.minor?r.minor>n.minor?1:-1:r.patch!==n.patch?r.patch>n.patch?1:-1:r.prerelease&&n.prerelease?r.prerelease===n.prerelease?0:r.prerelease>n.prerelease?1:-1:r.prerelease&&!n.prerelease?-1:!r.prerelease&&n.prerelease?1:0:null}(l,i);return{accepted:a&&!c,termsType:u}}async function tr(){try{return(await er()).accepted}catch(e){throw new Error(`Failed to check terms requirements: ${e instanceof Error?e.message:String(e)}`)}}function rr(){const[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null),[o,a]=(0,l.useState)(!0),[i,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{async function e(){try{a(!0),s(null);const e=await er();t(e.accepted),n(e.termsType)}catch(e){const r=e instanceof Error?e.message:"Failed to check terms";s(r),t(!1),n(null)}finally{a(!1)}}e();const r=()=>{e()};return document.addEventListener(Kt,r),()=>{document.removeEventListener(Kt,r)}},[]),{accepted:e,termsType:r,loading:o,error:i}}function nr(e,t){var r;const{explainer:n,...o}=null!==(r=t.metadata)&&void 0!==r?r:{},a={name:t.name,description:t.description,inputSchema:t.inputSchema,metadata:n?{...o,explainer:e=>n(e)}:o,responseFormat:t.responseFormat,verboseParsingErrors:t.verboseParsingErrors,async invoke(r,n){var o;try{if(null===(o=n.signal)||void 0===o?void 0:o.aborted)throw new Error(`Tool ${t.name} execution was aborted`);const a=t.validate(r),i=[e(a,n)];return n.signal&&i.push(new Promise((e,r)=>{var o;null===(o=n.signal)||void 0===o||o.addEventListener("abort",()=>{r(new Error(`Tool ${t.name} execution was aborted`))},{once:!0})})),n.timeout&&n.timeout>0&&i.push(new Promise((e,r)=>{setTimeout(()=>{r(new Error(`Tool ${t.name} execution timed out after ${n.timeout}ms`))},n.timeout)})),Promise.race(i)}catch(e){throw t.verboseParsingErrors&&console.error(`Error invoking tool ${t.name}:`,e,r),e}}};return a}const or="grafana-assistant-limits-updated";async function ar(){var e,t,r,n;const o=(0,s.getBackendSrv)(),a=`${null!==(e=null===s.config||void 0===s.config?void 0:s.config.appSubUrl)&&void 0!==e?e:""}/api/plugins/${M}/resources/api/v1/usage/limits/prompt`,i=(await(0,Z.lastValueFrom)(o.fetch({url:a,method:"GET",showErrorAlert:!1}))).data.data,l=null!==(t=i.total)&&void 0!==t?t:0,u=null!==(r=i.limit)&&void 0!==r?r:0;return{count:l,limit:u,month:null!==(n=i.month)&&void 0!==n?n:"",isLimitReached:u>0&&l>=u}}async function ir(){try{return await ar()}catch(e){throw new Error(`Failed to check limits: ${e instanceof Error?e.message:String(e)}`)}}function sr(){const[e,t]=(0,l.useState)(0),[r,n]=(0,l.useState)(0),[o,a]=(0,l.useState)(""),[i,s]=(0,l.useState)(!0),[u,c]=(0,l.useState)(null),d=(0,l.useCallback)(async()=>{try{s(!0),c(null);const e=await ar();t(e.count),n(e.limit),a(e.month)}catch(e){const r=e instanceof Error?e.message:"Failed to fetch limits";c(r),t(0),n(0),a("")}finally{s(!1)}},[]);return(0,l.useEffect)(()=>{d()},[d]),(0,l.useEffect)(()=>{const e=e=>{const r=e;r.detail&&(t(r.detail.count),n(r.detail.limit),c(null))};return window.addEventListener(or,e),()=>{window.removeEventListener(or,e)}},[]),{count:e,limit:r,month:o,isLimitReached:r>0&&e>=r,loading:i,error:u,refetch:d}}e.exports=n})()},45850(e,t,r){"use strict";r.d(t,{S:()=>P});var n=r(1169);class o extends Error{constructor(e,t,r,n){super(r,n),this.error=e,this.response=t,Object.setPrototypeOf(this,o.prototype),this.name=o.name}}class a extends o{constructor(e,t,r){super(e,void 0,t,r),Object.setPrototypeOf(this,a.prototype),this.name=a.name}}class i extends o{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,i.prototype),this.name=i.name}}class s extends o{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,s.prototype),this.name=s.name,this.message=null!=t?t:"OFREP request failed: unauthorized"}}class l extends o{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,l.prototype),this.name=l.name,this.message=null!=t?t:"OFREP request failed: forbidden"}}class u extends o{constructor(e,t,r){super(void 0,e,t,r),this.response=e,Object.setPrototypeOf(this,u.prototype),this.name=u.name,this.requestTime=new Date,this.message=(null!=t?t:this.retryAfterDate)?`rate limit exceeded, try again after ${this.retryAfterDate}`:"rate limit exceeded, try again later"}get retryAfterHeader(){return this.response.headers.get("Retry-After")}get retryAfterSeconds(){if(!this.retryAfterHeader)return null;const e=Number.parseInt(this.retryAfterHeader,10);return Number.isFinite(e)?e:null}get retryAfterDate(){if(!this.retryAfterHeader)return null;if(this.retryAfterSeconds){return this.retryAfterSeconds?new Date(this.requestTime.getTime()+1e3*this.retryAfterSeconds):null}const e=new Date(this.retryAfterHeader);return isNaN(e.valueOf())?null:e}}function c(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function d(e){return!(!e||"object"!=typeof e)&&("key"in e&&"string"==typeof e.key&&"errorCode"in e&&"string"==typeof e.errorCode)}"function"==typeof SuppressedError&&SuppressedError;const O=[400,404,500],h=[200];function p(e){return c(this,arguments,void 0,function*(e,t=null){var r;return new Headers([["Content-Type","application/json; charset=utf-8"],...(null==e?void 0:e.headers)||[],...(yield null===(r=null==e?void 0:e.headersFactory)||void 0===r?void 0:r.call(e))||[],...t?[["If-None-Match",t]]:[]])})}const f={[n.O4.FLAG_NOT_FOUND]:"Flag was not found",[n.O4.GENERAL]:"General error",[n.O4.INVALID_CONTEXT]:"Context is invalid or could be parsed",[n.O4.PARSE_ERROR]:"Flag or flag configuration could not be parsed",[n.O4.PROVIDER_FATAL]:"Provider is in a fatal error state",[n.O4.PROVIDER_NOT_READY]:"Provider is not yet ready",[n.O4.TARGETING_KEY_MISSING]:"Targeting key is missing",[n.O4.TYPE_MISMATCH]:"Flag is not of expected type"};class m{constructor(e,t=function(){return globalThis?globalThis.fetch.bind(globalThis):window?window.fetch.bind(window):(self&&self.fetch.bind(self),fetch)}()){this.baseOptions=e,this.fetchImplementation=t}isJsonMime(e){const t=e.headers.get("Content-Type");return!!t&&m.jsonRegex.test(t)}static isOFREFErrorHttpStatus(e){return O.includes(e)}static isOFREFSuccessHttpStatus(e){return h.includes(e)}doFetchRequest(e){return c(this,void 0,void 0,function*(){var t;let r;try{const n=null!==(t=this.baseOptions.timeoutMs)&&void 0!==t?t:1e4,o=new AbortController;setTimeout(()=>o.abort(new DOMException(`This signal is timeout in ${n}ms`,"TimeoutError")),n),r=yield this.fetchImplementation(e,{signal:o.signal})}catch(e){throw new a(e,"The OFREP request failed.",{cause:e})}if(401===r.status)throw new s(r);if(403===r.status)throw new l(r);if(429===r.status)throw new u(r);if(200===r.status&&!this.isJsonMime(r))throw new i(r,"OFREP did not respond with expected MIME application/json");try{return{response:r,body:yield r.json()}}catch(e){return{response:r}}})}postEvaluateFlag(e,t){return c(this,void 0,void 0,function*(){let r=`${this.baseOptions.baseUrl}/ofrep/v1/evaluate/flags/${e}`;this.baseOptions.query&&(r+=`?${this.baseOptions.query.toString()}`);const n=new Request(r,{headers:yield p(this.baseOptions),method:"POST",body:JSON.stringify(null!=t?t:{})}),{response:o,body:a}=yield this.doFetchRequest(n);if(200===o.status&&a&&!d(a))return{httpStatus:o.status,value:a,httpResponse:o};if(m.isOFREFErrorHttpStatus(o.status)&&d(a))return{httpStatus:o.status,value:a,httpResponse:o};throw new i(o,"The OFREP response does not match the expected format")})}postBulkEvaluateFlags(e){return c(this,arguments,void 0,function*(e,t=null){let r=`${this.baseOptions.baseUrl}/ofrep/v1/evaluate/flags`;this.baseOptions.query&&(r+=`?${this.baseOptions.query.toString()}`);const n=new Request(r,{headers:yield p(this.baseOptions,t),method:"POST",body:JSON.stringify(null!=e?e:{})}),{response:o,body:a}=yield this.doFetchRequest(n);if(200===o.status&&function(e){return!(!e||"object"!=typeof e)&&"flags"in e}(a))return{httpStatus:o.status,value:a,httpResponse:o};if(304===o.status)return{httpStatus:o.status,value:void 0,httpResponse:o};if(m.isOFREFErrorHttpStatus(o.status)&&function(e){return!(!e||"object"!=typeof e)&&"errorCode"in e}(a))return{httpStatus:o.status,value:a,httpResponse:o};throw new i(o,"The OFREP response does not match the expected format")})}}function v(e){if(!e)return;const t=Object.entries(e).filter(([,e])=>["string","number","boolean"].includes(typeof e));return Object.fromEntries(t)}m.jsonRegex=new RegExp(/application\/[^+]*[+]?(json);?.*/,"i");var g,b=r(46105);function $(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError,function(e){e.SUCCESS_NO_CHANGES="SUCCESS_NO_CHANGES",e.SUCCESS_WITH_CHANGES="SUCCESS_WITH_CHANGES"}(g||(g={}));class P{constructor(e,t){var r;this.DEFAULT_POLL_INTERVAL=3e4,this.metadata={name:"OpenFeature Remote Evaluation Protocol Web Provider"},this.runsOn="client",this.events=new b.by,this._flagCache={},this._options=e,this._logger=t,this._etag=null,this._ofrepAPI=new m(this._options,this._options.fetchImplementation),this._pollingInterval=null!==(r=this._options.pollInterval)&&void 0!==r?r:this.DEFAULT_POLL_INTERVAL}get flagCache(){return Object.assign({},this._flagCache)}initialize(e){return $(this,void 0,void 0,function*(){var t;try{this._context=e,yield this._fetchFlags(e),this._pollingInterval>0&&this.startPolling(),null===(t=this._logger)||void 0===t||t.debug(`${this.metadata.name} initialized successfully`)}catch(e){if(e instanceof s||e instanceof l)throw new b.wh("Initialization failed",{cause:e});throw e}})}resolveBooleanEvaluation(e,t,r){return this._resolve(e,t)}resolveStringEvaluation(e,t,r){return this._resolve(e,t)}resolveNumberEvaluation(e,t,r){return this._resolve(e,t)}resolveObjectEvaluation(e,t,r){return this._resolve(e,t)}onContextChange(e,t){return $(this,void 0,void 0,function*(){var e,r,n;try{this._context=t;const e=new Date;if(void 0!==this._retryPollingAfter&&this._retryPollingAfter>e)return;yield this._fetchFlags(t)}catch(t){if(t instanceof u)return void(null===(e=this.events)||void 0===e||e.emit(b.Uc.Stale,{message:`${t.name}: ${t.message}`}));if(t instanceof b.Lh||t instanceof a||t instanceof s||t instanceof l)return void(null===(r=this.events)||void 0===r||r.emit(b.Uc.Error,{message:`${t.name}: ${t.message}`}));null===(n=this.events)||void 0===n||n.emit(b.Uc.Error,{message:`Unknown error: ${t}`})}})}onClose(){return this.stopPolling(),Promise.resolve()}_fetchFlags(e){return $(this,void 0,void 0,function*(){var t;try{const r={context:e},n=yield this._ofrepAPI.postBulkEvaluateFlags(r,this._etag);if(304===n.httpStatus)return{status:g.SUCCESS_NO_CHANGES,flags:[]};if(200!==n.httpStatus)throw new b.$g(`Failed OFREP bulk evaluation request, status: ${n.httpStatus}`);const o=n.value;if(!("flags"in o)||!Array.isArray(o.flags))throw new Error("No flags in OFREP bulk evaluation response");const a=o.flags.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{}),i=this._getListUpdatedFlags(this._flagCache,a);return this._flagCache=a,this._etag=null===(t=n.httpResponse)||void 0===t?void 0:t.headers.get("etag"),this._flagSetMetadataCache=v("object"==typeof o.metadata?o.metadata:{}),{status:g.SUCCESS_WITH_CHANGES,flags:i}}catch(e){throw e instanceof u&&null!==e.retryAfterDate&&(this._retryPollingAfter=e.retryAfterDate),e}})}_getListUpdatedFlags(e,t){const r=[],n=Object.keys(e),o=Object.keys(t);for(const o in t)-1!==n.indexOf(o)&&JSON.stringify(e[o])===JSON.stringify(t[o])||r.push(o);for(const t in e)-1===o.indexOf(t)&&r.push(t);return r}_resolve(e,t){const r=this._flagCache[e];return r?this.responseToResolutionDetails(r,t):{value:t,flagMetadata:this._flagSetMetadataCache,reason:b.$W.ERROR,errorCode:b.O4.FLAG_NOT_FOUND,errorMessage:f[b.O4.FLAG_NOT_FOUND]}}responseToResolutionDetails(e,t){return d(e)?function(e,t,r){var o,a,i;if(null==r||r(e),"errorCode"in e){const r=null!==(o=e.errorCode)&&void 0!==o?o:n.O4.GENERAL,s=null!==(i=null!==(a=e.errorDetails)&&void 0!==a?a:f[e.errorCode])&&void 0!==i?i:e.errorCode,l=v(e.metadata);return{value:t,reason:n.$W.ERROR,flagMetadata:l,errorCode:r,errorMessage:s}}throw e}(e,t):function(e,t){return void 0===e.value?{value:t,variant:e.variant,flagMetadata:e.metadata,reason:e.reason||n.$W.DEFAULT}:typeof e.value!=typeof t?{value:t,reason:n.$W.ERROR,flagMetadata:e.metadata,errorCode:n.O4.TYPE_MISMATCH,errorMessage:f[n.O4.TYPE_MISMATCH]}:{value:e.value,variant:e.variant,reason:e.reason,flagMetadata:v(e.metadata)}}(e,t)}startPolling(){this._pollingIntervalId=setInterval(()=>$(this,void 0,void 0,function*(){var e,t;try{const t=new Date;if(void 0!==this._retryPollingAfter&&this._retryPollingAfter>t)return;const r=yield this._fetchFlags(this._context);r.status===g.SUCCESS_WITH_CHANGES&&(null===(e=this.events)||void 0===e||e.emit(b.Uc.ConfigurationChanged,{message:"Flags updated",flagsChanged:r.flags}))}catch(e){null===(t=this.events)||void 0===t||t.emit(b.Uc.Stale,{message:`Error while polling: ${e}`})}}),this._pollingInterval)}stopPolling(){this._pollingIntervalId&&clearInterval(this._pollingIntervalId)}}},23088(e,t,r){"use strict";e.exports=r(5241)},97666(e,t,r){"use strict";r.d(t,{r4:()=>o,md:()=>a,GH:()=>n});const n={x_over_time:(e,t,r="$__range",n="")=>`${e}_over_time((${t})[${r}:${n}])`,avg_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("avg",e,t,r),count_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("count",e,t,r),last_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("last",e,t,r),max_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("max",e,t,r),min_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("min",e,t,r),present_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("present",e,t,r),stddev_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stddev",e,t,r),stdvar_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stdvar",e,t,r),sum_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("sum",e,t,r),quantile_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("quantile",e,t,r),offset:({units:e})=>(e=>{let t="";for(const[r,n]of Object.entries(e))n>0&&(t+=`${n}${r}`);return t.length?`offset ${t}`:""})(e),by:e=>e?` by (${e.join(", ")}) `:"",without:e=>e?` without (${e.join(", ")}) `:"",byOrWithout:({by:e,without:t})=>e?n.by(e):n.without(t),sum:({expr:e,by:t,without:r})=>`sum${n.byOrWithout({by:t,without:r})}(${e})`,min:({expr:e,by:t,without:r})=>`min${n.byOrWithout({by:t,without:r})}(${e})`,max:({expr:e,by:t,without:r})=>`max${n.byOrWithout({by:t,without:r})}(${e})`,avg:({expr:e,by:t,without:r})=>`avg${n.byOrWithout({by:t,without:r})}(${e})`,group:({expr:e,by:t,without:r})=>`group${n.byOrWithout({by:t,without:r})}(${e})`,count:({expr:e,by:t,without:r})=>`count${n.byOrWithout({by:t,without:r})}(${e})`,stddev:({expr:e,by:t,without:r})=>`stddev${n.byOrWithout({by:t,without:r})}(${e})`,stdvar:({expr:e,by:t,without:r})=>`stdvar${n.byOrWithout({by:t,without:r})}(${e})`,count_values:({expr:e,by:t,without:r,parameter:o})=>`count_values${n.byOrWithout({by:t,without:r})}(${o}, ${e})`,bottomk:({expr:e,by:t,without:r,parameter:o})=>`bottomk${n.byOrWithout({by:t,without:r})}(${o}, ${e})`,topk:({expr:e,by:t,without:r,parameter:o})=>`topk${n.byOrWithout({by:t,without:r})}(${o}, ${e})`,quantile:({expr:e,by:t,without:r,parameter:o})=>`quantile${n.byOrWithout({by:t,without:r})}(${o}, ${e})`,and:({left:e,right:t})=>`${e} and ${t}`,or:({left:e,right:t})=>`${e} or ${t}`,unless:({left:e,right:t})=>`${e} unless ${t}`,rate:({expr:e,interval:t="$__rate_interval"})=>`rate(${e}[${t}])`,increase:({expr:e,interval:t="$__range"})=>`increase(${e}[${t}])`,label_replace:({expr:e,newLabel:t,existingLabel:r,replacement:n="$1",regex:o="(.*)"})=>`label_replace(${e}, "${t}", "${n}", "${r}", "${o}")`,label_join:({expr:e,newLabel:t,separator:r=",",labels:n})=>`label_join(${e}, "${t}", "${r}", ${n.map(e=>`"${e}"`).join(", ")})`};class o{metric;selectors=new Map;constructor(e){this.metric=e.metric,e.defaultSelectors?.forEach(e=>this.setSelector(e));for(const[t,r]of Object.entries(e.values))void 0!==r&&this.selectors.set(t,[{operator:e.defaultOperator,label:t,value:r}])}setSelector(e){const t=this.selectors.get(e.label)||[];return t.push(e),this.selectors.set(e.label,t),this}toString(){const e=Array.from(this.selectors).flatMap(([e,t])=>t.map(t=>`${e}${t.operator}"${t.value}"`)).join(", ");return`${this.metric}{${e}}`}}var a;!function(e){e.equal="=",e.notEqual="!=",e.regexMatch="=~",e.notRegexMatch="!~"}(a||(a={}))},31703(e,t,r){"use strict";r.d(t,{AL:()=>u,K3:()=>s,MD:()=>l,Yw:()=>c});var n=r(76059);const o={json:1,logfmt:2,unpack:3,pattern:4,regexp:5,label_format:7,line_format:8,label_replace:9,vector:10,offset:11,bool:12,on:13,ignoring:14,group_left:15,group_right:16,unwrap:6,decolorize:17,drop:18,keep:19},a={by:20,without:21,and:22,or:23,unless:24,sum:25,avg:26,count:27,max:28,min:29,stddev:30,stdvar:31,bottomk:32,topk:33,sort:34,sort_desc:35},i={__proto__:null,ip:295,count_over_time:301,rate:303,rate_counter:305,bytes_over_time:307,bytes_rate:309,avg_over_time:311,sum_over_time:313,min_over_time:315,max_over_time:317,stddev_over_time:319,stdvar_over_time:321,quantile_over_time:323,first_over_time:325,last_over_time:327,absent_over_time:329,bytes:335,duration:337,duration_seconds:339},s=n.U1.deserialize({version:14,states:"EtOYQPOOO#cQPO'#DUOOQO'#ER'#ERO#hQPO'#ERO$}QPO'#DTOYQPO'#DTOOQO'#Ed'#EdO%[QPO'#EcOOQO'#FP'#FPO%aQPO'#FOQ%lQPOOO&mQPO'#F]O&rQPO'#F^OOQO'#Eb'#EbOOQO'#DS'#DSOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsO&wQPO'#DWOOQO'#DV'#DVO'VQPO,59pOOQO,5:m,5:mOOQO'#Dc'#DcO'_QPO'#DbO'gQPO'#DaO)lQPO'#D`O*{QPO'#D`OOQO'#D_'#D_O+sQPO,59oO-}QPO,59oO.UQPO,5:|O.]QPO,5:}O.hQPO'#E|O0sQPO,5;jO0zQPO,5;jO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lOYQPO,5;wO3cQPO,5;xO3hQPO,59rO#cQPO,59qOOQO1G/[1G/[OOQO'#Dh'#DhO3mQPO,59|O5^QPO,59|OOQO'#Di'#DiO5cQPO,59{OOQO,59{,59{O5kQPO'#DWO6YQPO'#DlO8PQPO'#DoO9sQPO'#DoOOQO'#Do'#DoOOQO'#Dv'#DvOOQO'#Dt'#DtO+kQPO'#DtO9xQPO,59zO;iQPO'#EVO;nQPO'#EWOOQO'#EZ'#EZO;sQPO'#E[O;xQPO'#E_OOQO,59z,59zOOQO,59y,59yOOQO1G/Z1G/ZOOQO1G0h1G0hO;}QPO'#EtO.`QPO'#EtO<XQPO1G0iO<^QPO1G0iO<cQPO,5;hO=oQPO1G1UO=vQPO1G1UO=}QPO1G1UO>UQPO'#FSO@dQPO'#FRO@nQPO'#FROYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO@xQPO1G1cOAPQPO1G1dOOQO1G/^1G/^OOQO1G/]1G/]O5cQPO1G/hOAUQPO1G/hOAZQPO'#DjOBzQPO'#DjOOQO1G/g1G/gOCbQPO,59rOCPQPO,5:cOOQO'#Dm'#DmOClQPO,5:WOEcQPO'#DrOOQO'#Dq'#DqOGVQPO,5:_OHvQPO,5:[OOQO,5:Z,5:ZOJgQPO,5:`O+kQPO,5:`O+kQPO,5:`OOQO,5:q,5:qOJuQPO'#EYOOQO'#EX'#EXOJzQPO,5:rOLkQPO'#E^OOQO'#E^'#E^OOQO'#E]'#E]ONbQPO,5:vO!!RQPO'#EaOOQO'#Ea'#EaOOQO'#E`'#E`O!#xQPO,5:yO!%iQPO'#D`O;}QPO,5;`O!%pQPO'#EuO!%uQPO,5;`O!%}QPO,5;`O!&[QPO,5;`O!&iQPO,5;`O!&nQPO7+&TO.`QPO7+&TOOQO'#E}'#E}O!(OQPO1G1SOOQO1G1S1G1SOYQPO7+&pO!(WQPO7+&pO!)hQPO7+&pO!)oQPO7+&pO!)vQQO'#FTOOQO,5;n,5;nO!,UQPO,5;mO!,]QPO,5;mO!-nQPO7+&rO!-uQPO7+&rOOQO7+&r7+&rO!.SQPO7+&rO!.ZQPO7+&rO!/`QPO7+&rO!/pQPO7+&}OOQO7+'O7+'OOOQO7+%S7+%SO!/uQPO7+%SO5cQPO,5:UO!/zQPO,5:UO!0PQPO1G/{OOQO1G/}1G/}OOQO1G0U1G0UOOQO1G0W1G0WOOQO,5:X,5:XO!0UQPO1G/yO!1uQPO,5:^O!1zQPO,5:]OOQO1G/z1G/zO!2PQPO1G/zO!3pQPO,5:tO;nQPO,5:sO;sQPO,5:wO;xQPO,5:zO!3xQPO,5;cO!%uQPO1G0zO!4WQPO1G0zO!4`QPO,5;aO+kQPO,5;cO!4eQPO1G0zO!4oQPO'#EvO!4tQPO1G0zO!4eQPO1G0zO!4|QPO1G0zO!5ZQPO1G0zO!%xQPO1G0zOOQO1G0z1G0zOOQO<<Io<<IoO!5fQPO<<IoO!5kQPO,5;iOOQO7+&n7+&nO!5pQPO<<J[OOQO<<J[<<J[OYQPO<<J[OOQO'#FV'#FVO!5wQPO,5;oOOQO'#FU'#FUOOQO,5;o,5;oOOQO1G1X1G1XO!6PQPO1G1XO!8YQPO<<JiOOQO<<Hn<<HnOOQO1G/p1G/pO!8_QPO1G/pO!8dQPO7+%gOOQO1G/x1G/xOOQO1G/w1G/wOOQO1G0`1G0`OOQO1G0_1G0_OOQO1G0c1G0cOOQO1G0f1G0fOOQO'#Ex'#ExOOQO1G0}1G0}O!8iQPO1G0}OOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO7+&f7+&fOOQO1G0{1G0{O!8nQPO1G0}O!9SQPO7+&fOOQO,5;b,5;bO!9[QPO7+&fO!%xQPO7+&fO!9fQPO7+&fO!9qQPOAN?ZOOQO1G1T1G1TO!;RQPOAN?vO!<cQPOAN?vO!<jQQO1G1ZOOQO1G1Z1G1ZOOQO7+&s7+&sO!<rQPOAN@TOOQO7+%[7+%[O!<wQPO<<IRO!<|QPO7+&iO!=RQPO<<JQO!=ZQPO<<JQO!=cQPO'#EwO!=hQPO<<JQOOQOG24uG24uOOQOG25bG25bOOQO1G1[1G1[OOQO7+&u7+&uO!=pQPOG25oOOQOAN>mAN>mO!=uQPO<<JTOOQOAN?lAN?lO!=zQPOAN?lO!>SQPOLD+ZOOQOAN?oAN?oOOQO,5:r,5:rO!>XQPO!$'NuO!>^QPO!)9DaO!>cQPO!.K9{OOQO!4//g!4//gO;nQPO'#EWO!>hQPO'#D`O!?`QPO,59oO!@fQPO'#DTOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO!AqQPO7+&rO!AxQPO7+&rO!BVQPO7+&rO!C_QPO7+&rO!CfQPO7+&rO!B^QPO'#FQ",stateData:"!Cs~O$TOStOS~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!vQO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O{nO~O!vqO~O!OrO!QrO!WrO!XrO!YrO!ZrOfwXgwXhwX!lwX!nwX!owX!pwX!qwX!wwX!xwX#{wX#|wX#}wX$OwX~O!_vO$RwX$ZwX~P#mO$Y{O~Od|Oe|O$Y}O~Of!QOg!POh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{!SO#|!SO#}!SO$O!TO~O$Y!VO~O$Y!WO~O|!XO!O!XO!P!XO!Q!XO~O$V!YO$W!ZO~O}!]O$X!_O~Og!`Of!TXh!TX!O!TX!Q!TX!W!TX!X!TX!Y!TX!Z!TX!_!TX!l!TX!n!TX!o!TX!p!TX!q!TX!w!TX!x!TX#{!TX#|!TX#}!TX$O!TX$R!TX$Z!TX$k!TX$V!TX~O!OrO!QrO!WrO!XrO!YrO!ZrO~Of!SXg!SXh!SX!_!SX!l!SX!n!SX!o!SX!p!SX!q!SX!w!SX!x!SX#{!SX#|!SX#}!SX$O!SX$R!SX$Z!SX$k!SX$V!SX~P)WOP!dOQ!cOR!fOS!eOT!eOV!lOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_vOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Rwa$Zwa~P)WOfvXgvXhvX!OvX!lvX!nvX!ovX!pvX!qvX!wvX!xvX#{vX#|vX#}vX$OvX~O$Z!rO~P,|O$Z!sO~P,|O!v!wO$UPO$Y!uO~O$Y!xO~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O!v!yO~P.mO$Y!{O~O[#OO]!|O^!|OX#uPY#uPi#uPj#uPk#uPl#uPm#uPn#uPo#uPp#uPq#uPr#uPs#uP!v#uP!w#uP!x#uP$U#uP$Y#uP$[#uP$]#uP$^#uP$_#uP$`#uP$a#uP$b#uP$c#uP$d#uP$e#uP$f#uP$g#uP$h#uP$i#uP$j#uP~O!v#WO~O}#XO~Og#ZOf!Uah!Ua!O!Ua!Q!Ua!W!Ua!X!Ua!Y!Ua!Z!Ua!_!Ua!l!Ua!n!Ua!o!Ua!p!Ua!q!Ua!w!Ua!x!Ua#{!Ua#|!Ua#}!Ua$O!Ua$R!Ua$Z!Ua$k!Ua$V!Ua~O$Y#[O~O}#]O$X!_O~O|#`O!O#`O!P!XO!Q!XO!l#aO!n#aO!o#aO!p#aO!q#aO~O{#dO!b#bOf!`Xg!`Xh!`X!O!`X!Q!`X!W!`X!X!`X!Y!`X!Z!`X!_!`X!l!`X!n!`X!o!`X!p!`X!q!`X!w!`X!x!`X#{!`X#|!`X#}!`X$O!`X$R!`X$Z!`X$k!`X$V!`X~O{#dOf!cXg!cXh!cX!O!cX!Q!cX!W!cX!X!cX!Y!cX!Z!cX!_!cX!l!cX!n!cX!o!cX!p!cX!q!cX!w!cX!x!cX#{!cX#|!cX#}!cX$O!cX$R!cX$Z!cX$k!cX$V!cX~O}#hO~Of#jOg#kO$V#jOh!Sa!O!Sa!Q!Sa!W!Sa!X!Sa!Y!Sa!Z!Sa!_!Sa!l!Sa!n!Sa!o!Sa!p!Sa!q!Sa!w!Sa!x!Sa#{!Sa#|!Sa#}!Sa$O!Sa$R!Sa$Z!Sa$k!Sa~O}#lO~O{#mO~O{#pO~O{#tO~O!_#xO$k#zO~P)WO$Z$PO~O$V$QO~O{$RO$Z$TO~Of!uXg!uXh!uX!O!uX!l!uX!n!uX!o!uX!p!uX!q!uX!w!uX!x!uX#{!uX#|!uX#}!uX$O!uX$Z!uX~O$V$UO~P<kO$Z$VO~P,|O!v$WO~P.mO$Y$YO~OX#uXY#uXi#uXj#uXk#uXl#uXm#uXn#uXo#uXp#uXq#uXr#uXs#uX!v#uX!w#uX!x#uX$U#uX$Y#uX$[#uX$]#uX$^#uX$_#uX$`#uX$a#uX$b#uX$c#uX$d#uX$e#uX$f#uX$g#uX$h#uX$i#uX$j#uX~O_$[O`$[O~P>ZO]!|O^!|O~P>ZO$V$dO~P,|O$Z$eO~O}$gO~Og$hOf!^Xh!^X!O!^X!Q!^X!W!^X!X!^X!Y!^X!Z!^X!_!^X!l!^X!n!^X!o!^X!p!^X!q!^X!w!^X!x!^X#{!^X#|!^X#}!^X$O!^X$R!^X$Z!^X$k!^X$V!^X~O$Y$iO~O!m$kO!s$lO!vQO!wRO!xRO~O}#XO$X!_O~PCPO{#dO!b$nOf!`ag!`ah!`a!O!`a!Q!`a!W!`a!X!`a!Y!`a!Z!`a!_!`a!l!`a!n!`a!o!`a!p!`a!q!`a!w!`a!x!`a#{!`a#|!`a#}!`a$O!`a$R!`a$Z!`a$k!`a$V!`a~O|$pOf!fXg!fXh!fX!O!fX!Q!fX!W!fX!X!fX!Y!fX!Z!fX!_!fX!l!fX!n!fX!o!fX!p!fX!q!fX!w!fX!x!fX#{!fX#|!fX#}!fX$O!fX$R!fX$V!fX$Z!fX$k!fX~O$V$qOf!gag!gah!ga!O!ga!Q!ga!W!ga!X!ga!Y!ga!Z!ga!_!ga!l!ga!n!ga!o!ga!p!ga!q!ga!w!ga!x!ga#{!ga#|!ga#}!ga$O!ga$R!ga$Z!ga$k!ga~O$V$qOf!dag!dah!da!O!da!Q!da!W!da!X!da!Y!da!Z!da!_!da!l!da!n!da!o!da!p!da!q!da!w!da!x!da#{!da#|!da#}!da$O!da$R!da$Z!da$k!da~Of#jOg#kO$V#jO$Z$rO~O|$tO~O$V$uOf!zag!zah!za!O!za!Q!za!W!za!X!za!Y!za!Z!za!_!za!l!za!n!za!o!za!p!za!q!za!w!za!x!za#{!za#|!za#}!za$O!za$R!za$Z!za$k!za~O|!XO!O!XO!P!XO!Q!XOf#QXg#QXh#QX!W#QX!X#QX!Y#QX!Z#QX!_#QX!l#QX!n#QX!o#QX!p#QX!q#QX!w#QX!x#QX#{#QX#|#QX#}#QX$O#QX$R#QX$V#QX$Z#QX$k#QX~O$V$vOf#Oag#Oah#Oa!O#Oa!Q#Oa!W#Oa!X#Oa!Y#Oa!Z#Oa!_#Oa!l#Oa!n#Oa!o#Oa!p#Oa!q#Oa!w#Oa!x#Oa#{#Oa#|#Oa#}#Oa$O#Oa$R#Oa$Z#Oa$k#Oa~O|!XO!O!XO!P!XO!Q!XOf#TXg#TXh#TX!W#TX!X#TX!Y#TX!Z#TX!_#TX!l#TX!n#TX!o#TX!p#TX!q#TX!w#TX!x#TX#{#TX#|#TX#}#TX$O#TX$R#TX$V#TX$Z#TX$k#TX~O$V$wOf#Rag#Rah#Ra!O#Ra!Q#Ra!W#Ra!X#Ra!Y#Ra!Z#Ra!_#Ra!l#Ra!n#Ra!o#Ra!p#Ra!q#Ra!w#Ra!x#Ra#{#Ra#|#Ra#}#Ra$O#Ra$R#Ra$Z#Ra$k#Ra~OU$xO~P*{O!m${O~O!_$|O$k#zO~OZ%OO!_#xO$Z#ha~P)WO!_#xO$Z%TO$k#zO~P)WO$Z%UO~Od|Oe|Of#Vqg#Vqh#Vq!O#Vq!l#Vq!n#Vq!o#Vq!p#Vq!q#Vq!w#Vq!x#Vq#{#Vq#|#Vq#}#Vq$O#Vq$R#Vq$Z#Vq$V#Vq~O$V%XO$Z%YO~Od|Oe|Of#rqg#rqh#rq!O#rq!l#rq!n#rq!o#rq!p#rq!q#rq!w#rq!x#rq#{#rq#|#rq#}#rq$O#rq$R#rq$Z#rq$V#rq~O$V%]O~P<kO$Z%[O~P,|O#z%^O$Z%aO~OX#uaY#uai#uaj#uak#ual#uam#uan#uao#uap#uaq#uar#uas#ua!v#ua!w#ua!x#ua$U#ua$[#ua$]#ua$^#ua$_#ua$`#ua$a#ua$b#ua$c#ua$d#ua$e#ua$f#ua$g#ua$h#ua$i#ua$j#ua~O$Y$YO~P!*OO_%cO`%cO$Y#ua~P!*OOf!QOh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{#tq#|#tq#}#tq$O#tq$R#tq$Z#tq~Og#tq~P!,jOf#tqg#tqh#tq~P!,pOg!PO~P!,jO$R#tq$Z#tq~P%lOf#tqg#tqh#tq!O#tq!l#tq!n#tq!o#tq!p#tq!q#tq#{#tq#|#tq#}#tq$O#tq~O!w!RO!x!RO$R#tq$Z#tq~P!.eO}%dO~O$Z%eO~O}%gO~O$Y%hO~O$V$qOf!gig!gih!gi!O!gi!Q!gi!W!gi!X!gi!Y!gi!Z!gi!_!gi!l!gi!n!gi!o!gi!p!gi!q!gi!w!gi!x!gi#{!gi#|!gi#}!gi$O!gi$R!gi$Z!gi$k!gi~O}%iO~O{#dO~Of#jO$V#jOg!hih!hi!O!hi!Q!hi!W!hi!X!hi!Y!hi!Z!hi!_!hi!l!hi!n!hi!o!hi!p!hi!q!hi!w!hi!x!hi#{!hi#|!hi#}!hi$O!hi$R!hi$Z!hi$k!hi~O{%kO}%kO~O{%pO$m%rO$n%sO$o%tO~OZ%OO$Z#hi~O$l%vO~O!_#xO$Z#hi~P)WO!m%yO~O!_$|O$Z#hi~O!_#xO$Z%{O$k#zO~P)WO!_$|O$Z%{O$k#zO~O$Z%}O~O{&OO~O$Z&PO~P,|O$V&RO$Z&SO~O$Y$YOX#uiY#uii#uij#uik#uil#uim#uin#uio#uip#uiq#uir#uis#ui!v#ui!w#ui!x#ui$U#ui$[#ui$]#ui$^#ui$_#ui$`#ui$a#ui$b#ui$c#ui$d#ui$e#ui$f#ui$g#ui$h#ui$i#ui$j#ui~O$V&UO~O$Z&VO~O}&WO~O$Y&XO~Of#jOg#kO$V#jO!_#ki$k#ki$Z#ki~O!_$|O$Z#hq~O!_#xO$Z#hq~P)WOZ%OO!_&[O$Z#hq~Od|Oe|Of#V!Rg#V!Rh#V!R!O#V!R!l#V!R!n#V!R!o#V!R!p#V!R!q#V!R!w#V!R!x#V!R#{#V!R#|#V!R#}#V!R$O#V!R$R#V!R$Z#V!R$V#V!R~Od|Oe|Of#r!Rg#r!Rh#r!R!O#r!R!l#r!R!n#r!R!o#r!R!p#r!R!q#r!R!w#r!R!x#r!R#{#r!R#|#r!R#}#r!R$O#r!R$R#r!R$Z#r!R$V#r!R~O$Z&_O~P,|O#z%^O$Z&aO~O}&bO~O$Z&cO~O{&dO~O!_$|O$Z#hy~OZ%OO$Z#hy~OU$xO~O!_&[O$Z#hy~O$V&gO~O$Z&hO~O!_$|O$Z#h!R~O}&jO~O$V&kO~O}&lO~O$Z&mO~OP!dOQ!cOR!fOS!eOT!eOV&nOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_&oOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Vwa~P)WO!_&oO$VwX~P#mOf&yOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{#tq#|#tq#}#tq$O#tq$V#tq~Og#tq~P!@pOf#tqg#tqh#tq~P!@vOg&xO~P!@pOf&yOg&xOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{&{O#|&{O#}&{O$O&|O~O$V#tq~P!B^O!w&zO!x&zO$V#tq~P!.eO",goto:"1l$RPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$S%R%j&Y&]PPPPPP&t'W'h'v(XPPPP(h(p(yP)S)XP)S)S)[)e)S)m*O*O*XPPPPPP*XP*O*bPPP)S)S*{+R)S)S+Y+])S+c+f+l,_,t-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-p-y.^.j/S/V/V/V/Y/i,_/l,_0R0w1Y1c1fPPPPP,_,_[YOT}!{$U%]Q$^#PQ$_#QS$`#R&tQ$a#SQ$b#TQ$c#UQ'O&rQ'P&sQ'Q&uQ'R&vQ'S&wR'T!Vt^O}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wRyTjSOT}!V!{#P#Q#R#S#T#U$U%]S!t{$QQ#}!u]&q&r&s&t&u&v&wRpPQoP^!hv!i#j#k#x$|&oQ#Y!YS#q!n$vT#u!o$wQxSQ#y!tQ$}#|Q%R#}Q%z%QR&p&q[wS!t#|#}%Q&q]!qx#y$}%R%z&piuSx!t#y#|#}$}%Q%R%z&p&qhtSx!t#y#|#}$}%Q%R%z&p&qR!auksSux!t#y#|#}$}%Q%R%z&p&qQ!^sV#^!`#Z$hW![s!`#Z$hR$j#`Q#_!`Q$f#ZR%f$hV!pv#x&oR#c!cQ#f!cQ#g!dR$o#cU#e!c!d#cR%j$qU!jv#x&oQ#i!iQ$r#jQ$s#kR%w$|_!hv!i#j#k#x$|&o_!gv!i#j#k#x$|&ov]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wT$m#`#aQ#o!lR&i&nS#n!l&nR%l$uR#s!nQ#r!nR%m$vR#w!oQ#v!oR%n$wj^O#P#Q#R#S#T#U&r&s&t&u&v&wQzTQ!z}Q#V!VQ$X!{Q%Z$UR&Q%]w]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwVOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwUOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ!v{Q$O!uR%W$QS#|!t#}W$z#y#{%R%SQ%u$yQ%|%TR&Z%{Q%Q#|Q%u$zQ&]%|R&e&ZQ#{!tS$y#y%RQ%P#|Q%S#}S%x$}%QS&Y%z%|R&f&]R%q$xR%o$xQ!OXQ%V$PQ%[$VQ&^%}R&_&PR$S!xwXOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ#U!UQ&r&xQ&s&yQ&t&zQ&u&{Q&v&|R&w&}h!}!P!Q!R!S!T!U&x&y&z&{&|&}R$]#OQ$Z!|Q%b$[R&T%cR%_$YQ%`$YR&`&R",nodeNames:" Json Logfmt Unpack Pattern Regexp Unwrap LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch PipePattern Npa FilterOp Ip OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter LiteralExpr Number Add Sub LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Mul Div Mod Pow LabelReplaceExpr VectorExpr",maxTerm:169,skippedNodes:[0,36],repeatNodeCount:0,tokenData:"<n~RvX^#ipq#iqr$^rs$yst%kuv%vxy%{yz&Qz{&V{|&[|}&a}!O&f!O!P2v!P!Q3v!Q!R3{!R![7^![!]9]!^!_9q!_!`:O!`!a:e!c!}:r!}#O;Y#P#Q;_#Q#R;d#R#S:r#S#T;i#T#o:r#o#p;u#p#q;z#q#r<i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$T~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aR!_!`$j!`!a$o#r#s$t~$oO!O~~$tO!Z~~$yO!Q~~$|UOY$yZr$yrs%`s#O$y#O#P%e#P~$y~%eO}~~%hPO~$y~%pQt~OY%kZ~%k~%{O#}~~&QO$Y~~&VO$Z~~&[O#{~~&aO!w~~&fO$V~~&kQ!x~}!O&q!Q![(w~&tQ#_#`&z#g#h(X~&}P#X#Y'Q~'TP#X#Y'W~'ZP#d#e'^~'aP}!O'd~'gP#X#Y'j~'mP#a#b'p~'sP#d#e'v~'yP#h#i'|~(PP#m#n(S~(XO!b~~([P#h#i(_~(bP#f#g(e~(hP#]#^(k~(nP#V#W(q~(tP#h#i(S~(zZ!O!P)m!Q![(w#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~)pP!Q![)s~)vV!Q![)s#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~*bP!m~!Q![*e~*hV!O!P*}!Q![*e#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+QP!Q![+T~+WU!Q![+T#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+oQ!m~!Q![+u#g#h-Q~+xV!O!P,_!Q![+u#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,bP!Q![,e~,hU!Q![,e#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,}P#g#h-Q~-VP!m~!Q![-Y~-]T!O!P-l!Q![-Y#b#c.R#i#j.^${$|.^~-oP!Q![-r~-uS!Q![-r#b#c.R#i#j.^${$|.^~.UP#g#h.X~.^O!m~~.aP#g#h.d~.iP!m~!Q![.l~.oR!O!P.x!Q![.l#b#c.R~.{P!Q![/O~/RQ!Q![/O#b#c.R~/^P!m~!Q![/a~/dU!O!P/v!Q![/a#a#b,z#b#c.R#i#j.^${$|.^~/yP!Q![/|~0PT!Q![/|#a#b,z#b#c.R#i#j.^${$|.^~0eP!m~!Q![0h~0kW!O!P)m!Q![0h#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~1YP!m~!Q![1]~1`X!O!P)m!Q![1]#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~2QP!m~!Q![2T~2WY!O!P)m!Q![2T#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T${$|.^~2yP!Q![2|~3RR!v~!Q![2|!g!h3[#X#Y3[~3_R{|3h}!O3h!Q![3n~3kP!Q![3n~3sP!v~!Q![3n~3{O#|~~4Qe!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#l#m8q#m#n1{${$|.^~5hR!v~!Q![5q!g!h3[#X#Y3[~5v`!v~!Q![5q!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~6}O!s~~7QQ!d!e6x#]#^7W~7ZP!d!e6x~7cd!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~8tR!Q![8}!c!i8}#T#Z8}~9SR!v~!Q![8}!c!i8}#T#Z8}P9bT{P!Q![9]![!]9]!c!}9]#R#S9]#T#o9]~9vP!o~!_!`9y~:OO!p~~:TQ|~!_!`:Z#r#s:`~:`O!q~~:eO!P~~:jP!l~!_!`:m~:rO!n~R:yT{P#zQ!Q![:r![!]9]!c!}:r#R#S:r#T#o:r~;_O$k~~;dO$l~~;iO$O~~;lRO#S;i#S#T%`#T~;i~;zO$U~~<PR!_~!_!`<Y!`!a<_#r#s<d~<_O!W~~<dO!Y~~<iO!X~~<nO$W~",tokenizers:[0,1],topRules:{LogQL:[0,37]},specialized:[{term:43,get:(e,t)=>(e=>o[e.toLowerCase()]||-1)(e)<<1},{term:43,get:(e,t)=>(e=>a[e.toLowerCase()]||-1)(e)<<1|1},{term:43,get:e=>i[e]||-1}],tokenPrec:0}),l=40,u=49,c=98},20971(e,t,r){"use strict";r.d(t,{Nc:()=>n,Rq:()=>o});const n=e=>{if(""===e)return e;return o(e)?e:`"${e}"`},o=e=>{if(0===e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!a(r,t))return!1}return!0},a=(e,t)=>{const r=e.codePointAt(0);return void 0!==r&&(r>=97&&r<=122||r>=65&&r<=90||95===r||58===r||r>=48&&r<=57&&t>0)}},98646(e,t,r){"use strict";r.d(t,{$N:()=>o,xB:()=>a,yL:()=>n});var n=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(n||{});var o=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(o||{}),a=(e=>(e.Ascending="asc",e.Descending="desc",e.None="none",e))(a||{})},27550(e,t,r){"use strict";r.d(t,{P7:()=>i});var n=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(n||{});var o=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(o||{});var a=(e=>(e.Actions="actions",e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.Custom="custom",e.DataLinks="data-links",e.Gauge="gauge",e.Geo="geo",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge",e.Markdown="markdown",e.Pill="pill",e.Sparkline="sparkline",e))(a||{});a.Auto;var i=(e=>(e.Opacity="opacity",e.Scheme="scheme",e))(i||{});n.Auto,o.Single},91787(e,t,r){"use strict";r.d(t,{dM:()=>o,rw:()=>n,yV:()=>a});const n={allowCustomValue:!0,includeAll:!1,multi:!1,options:[],skipUrlSync:!1,staticOptions:[],valuesFormat:"csv"};var o=(e=>(e.RangeToText="range",e.RegexToText="regex",e.SpecialValue="special",e.ValueToText="value",e))(o||{});var a=(e=>(e[e.Crosshair=1]="Crosshair",e[e.Off=0]="Off",e[e.Tooltip=2]="Tooltip",e))(a||{})},91456(e,t,r){"use strict";r.d(t,{zL:()=>o});var n=r(91787),o=(e=>(e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable",e[e.inControlsMenu=3]="inControlsMenu",e))(o||{});n.rw},1169(e,t,r){"use strict";r.d(t,{$W:()=>p,$g:()=>g,$l:()=>R,Lh:()=>m,O4:()=>f,Uc:()=>A,VL:()=>G,X3:()=>T,XD:()=>U,_V:()=>y,_e:()=>k,eD:()=>h,g7:()=>j,j:()=>q,l6:()=>w,qM:()=>L,qr:()=>S,sN:()=>D,sP:()=>X,wh:()=>P});var n=Object.defineProperty,o=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(i)for(var r of i(t))l.call(t,r)&&u(e,r,t[r]);return e},d=(e,t)=>o(e,a(t)),O=(e,t,r)=>new Promise((n,o)=>{var a=e=>{try{s(r.next(e))}catch(e){o(e)}},i=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}),h=class{constructor(){this.data=new Map}set(e,t){this.data.set(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}delete(e){return this.data.delete(e)}clear(){this.data.clear()}},p={STATIC:"STATIC",DEFAULT:"DEFAULT",TARGETING_MATCH:"TARGETING_MATCH",SPLIT:"SPLIT",CACHED:"CACHED",DISABLED:"DISABLED",UNKNOWN:"UNKNOWN",STALE:"STALE",ERROR:"ERROR"},f=(e=>(e.PROVIDER_NOT_READY="PROVIDER_NOT_READY",e.PROVIDER_FATAL="PROVIDER_FATAL",e.FLAG_NOT_FOUND="FLAG_NOT_FOUND",e.PARSE_ERROR="PARSE_ERROR",e.TYPE_MISMATCH="TYPE_MISMATCH",e.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",e.INVALID_CONTEXT="INVALID_CONTEXT",e.GENERAL="GENERAL",e))(f||{}),m=class e extends Error{constructor(t,r){super(t),Object.setPrototypeOf(this,e.prototype),this.name="OpenFeatureError",this.cause=null==r?void 0:r.cause}},v=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="FlagNotFoundError",this.code="FLAG_NOT_FOUND"}},g=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="GeneralError",this.code="GENERAL"}},b=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="InvalidContextError",this.code="INVALID_CONTEXT"}},$=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ParseError",this.code="PARSE_ERROR"}},P=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}},y=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},E=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TargetingKeyMissingError",this.code="TARGETING_KEY_MISSING"}},_=class e extends m{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TypeMismatchError",this.code="TYPE_MISMATCH"}},w=(e,t)=>{switch(e){case"FLAG_NOT_FOUND":return new v(t);case"PARSE_ERROR":return new $(t);case"TYPE_MISMATCH":return new _(t);case"TARGETING_KEY_MISSING":return new E(t);case"INVALID_CONTEXT":return new b(t);case"PROVIDER_NOT_READY":return new y(t);case"PROVIDER_FATAL":return new P(t);default:return new g(t)}},R=(e=>(e.NOT_READY="NOT_READY",e.READY="READY",e.ERROR="ERROR",e.STALE="STALE",e.FATAL="FATAL",e.RECONCILING="RECONCILING",e))(R||{}),Q=class extends m{constructor(e,t){super(t),this.code=e}},x=class{constructor(e){this.statusEnum=e,this.runMode="sequential"}shouldEvaluateThisProvider(e,t){return e.providerStatus!==this.statusEnum.NOT_READY&&e.providerStatus!==this.statusEnum.FATAL}shouldEvaluateNextProvider(e,t,r){return!0}shouldTrackWithThisProvider(e,t,r,n){return e.providerStatus!==this.statusEnum.NOT_READY&&e.providerStatus!==this.statusEnum.FATAL}hasError(e){return"thrownError"in e||!!e.details.errorCode}hasErrorWithCode(e,t){var r;return"thrownError"in e?(null==(r=e.thrownError)?void 0:r.code)===t:e.details.errorCode===t}collectProviderErrors(e){var t;const r=[];for(const n of e)"thrownError"in n?r.push({providerName:n.providerName,error:n.thrownError}):n.details.errorCode&&r.push({providerName:n.providerName,error:new Q(n.details.errorCode,null!=(t=n.details.errorMessage)?t:"unknown error")});return{errors:r}}resolutionToFinalResult(e){return{details:e.details,provider:e.provider,providerName:e.providerName}}},S=class extends x{shouldEvaluateNextProvider(e,t,r){return!!this.hasErrorWithCode(r,"FLAG_NOT_FOUND")||(this.hasError(r),!1)}determineFinalResult(e,t,r){const n=r[r.length-1];return this.hasError(n)?this.collectProviderErrors(r):this.resolutionToFinalResult(n)}},T=class extends x{shouldEvaluateNextProvider(e,t,r){return this.hasError(r)}determineFinalResult(e,t,r){const n=r[r.length-1];return this.hasError(n)?this.collectProviderErrors(r):this.resolutionToFinalResult(n)}},X=class extends x{constructor(e,t,r){super(e),this.fallbackProvider=t,this.onMismatch=r,this.runMode="parallel"}determineFinalResult(e,t,r){var n;let o,a,i,s=!1;for(const[e,t]of r.entries()){if(this.hasError(t))return this.collectProviderErrors(r);t.provider===this.fallbackProvider&&(a=t),0===e&&(i=t),void 0!==o&&o!==t.details.value?s=!0:o=t.details.value}if(!a)throw new g("Fallback provider not found in resolution results");if(!i)throw new g("Final resolution not found in resolution results");return s?(null==(n=this.onMismatch)||n.call(this,r),{details:a.details,provider:a.provider}):this.resolutionToFinalResult(i)}},A=(e=>(e.Ready="PROVIDER_READY",e.Error="PROVIDER_ERROR",e.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",e.ContextChanged="PROVIDER_CONTEXT_CHANGED",e.Reconciling="PROVIDER_RECONCILING",e.Stale="PROVIDER_STALE",e))(A||{}),C={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},k=(e,t)=>!t&&"PROVIDER_READY"===e||C[t]===e,N=class{error(...e){console.error(...e)}warn(...e){console.warn(...e)}info(){}debug(){}},I=["error","warn","info","debug"],L=class{constructor(e){this.fallbackLogger=new N;try{for(const t of I)if(!e[t]||"function"!=typeof e[t])throw new Error(`The provided logger is missing the ${t} method.`);this.logger=e}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...e){this.log("error",...e)}warn(...e){this.log("warn",...e)}info(...e){this.log("info",...e)}debug(...e){this.log("debug",...e)}log(e,...t){try{this.logger[e](...t)}catch(r){this.fallbackLogger[e](...t)}}},D=class{constructor(e){this.globalLogger=e,this._handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap}}emit(e,t){this.eventEmitter.emit(e,t)}addHandler(e,t){const r=e=>O(this,null,function*(){var r;try{yield t(e)}catch(e){null==(r=this._logger)||r.error("Error running event handler:",e)}}),n=this._handlers[e].get(t);this._handlers[e].set(t,[...n||[],r]),this.eventEmitter.on(e,r)}removeHandler(e,t){const r=this._handlers[e].get(t);if(r){const t=r.pop();t&&this.eventEmitter.removeListener(e,t)}}removeAllHandlers(e){e?this.eventEmitter.removeAllListeners(e):this.eventEmitter.removeAllListeners()}getHandlers(e){return this.eventEmitter.listeners(e)}setLogger(e){return this._eventLogger=new L(e),this}get _logger(){var e,t;return null!=(t=this._eventLogger)?t:null==(e=this.globalLogger)?void 0:e.call(this)}};function q(e){return function(e){return"string"==typeof e}(e)?e:void 0}function U(e){return function(e){return"object"==typeof e}(e)?e:void 0}function V(e){return null!=e}var G=class{constructor(e,t,r){var n,o,a;this._provider=e,this._status=t,this._pendingContextChanges=0,null==(n=e.events)||n.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),null==(o=e.events)||o.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),null==(a=e.events)||a.addHandler("PROVIDER_ERROR",e=>{"PROVIDER_FATAL"===(null==e?void 0:e.errorCode)?this._status=r.FATAL:this._status=r.ERROR})}get provider(){return this._provider}set provider(e){this._provider=e}get status(){return this._status}set status(e){this._status=e}get allContextChangesSettled(){return 0===this._pendingContextChanges}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},j=class{constructor(e){this._hooks=[],this._context={},this._logger=new N,this._clientEventHandlers=new Map,this._domainScopedContext=new Map,this._clientEvents=new Map,this._runsOn=e}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(e){return this._logger=new L(e),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(e){return this.getProviderForClient(e).metadata}addHandler(e,t,r){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{var n;const o=r[0],a=r[1].provider,i=r[1].status;if(k(e,i))try{t({domain:o,providerName:a.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}}),this._apiEmitter.addHandler(e,t),(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this._apiEmitter.removeHandler(e,t)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(e){return this._apiEmitter.getHandlers(e)}setAwaitableProvider(e,t){var r,n,o,a,i,s,l,u;const c=q(e),d=null!=(r=U(e))?r:U(t);if(!d)return void this._logger.debug("No provider defined, ignoring setProvider call");const O=this.getProviderForClient(c),h=d.metadata.name;if(O===d)return void this._logger.debug("Provider is already set, ignoring setProvider call");if(d.runsOn){if(d.runsOn!==this._runsOn)throw new g(`Provider '${d.metadata.name}' is intended for use on the ${d.runsOn}.`)}else this._logger.debug(`Provider '${d.metadata.name}' has not defined its intended use.`);const p=this.getAssociatedEventEmitters(c);let f;const m=new G(d,this._statusEnumType.NOT_READY,this._statusEnumType);return"function"!=typeof d.initialize||this.allProviders.includes(d)?(m.status=this._statusEnumType.READY,p.forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}),null==(s=this._apiEmitter)||s.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})):f=null==(i=null==(a=null==(o=d.initialize)?void 0:o.call(d,c&&null!=(n=this._domainScopedContext.get(c))?n:this._context))?void 0:a.then(()=>{var e;m.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(c).forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}),null==(e=this._apiEmitter)||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}))?void 0:i.catch(e=>{var t;throw"PROVIDER_FATAL"===(null==e?void 0:e.code)?m.status=this._statusEnumType.FATAL:m.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(c).forEach(t=>{null==t||t.emit("PROVIDER_ERROR",{clientName:c,domain:c,providerName:h,message:null==e?void 0:e.message})}),null==(t=this._apiEmitter)||t.emit("PROVIDER_ERROR",{clientName:c,domain:c,providerName:h,message:null==e?void 0:e.message}),e}),c?this._domainScopedProviders.set(c,m):this._defaultProvider=m,this.transferListeners(O,d,c,p),this.allProviders.includes(O)||null==(u=null==(l=null==O?void 0:O.onClose)?void 0:l.call(O))||u.catch(e=>{this._logger.error(`error closing provider: ${null==e?void 0:e.message}, ${null==e?void 0:e.stack}`)}),f}getProviderForClient(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.provider)?r:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(e){const t=this._clientEvents.get(e);if(t)return t;const r=this._createEventEmitter();this._clientEvents.set(e,r);const n=this.getProviderForClient(e);return Object.values(A).forEach(t=>{var o;return null==(o=n.events)?void 0:o.addHandler(t,o=>O(this,null,function*(){r.emit(t,d(c({},o),{clientName:e,domain:e,providerName:n.metadata.name}))}))}),r}getUnboundEmitters(){const e=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(V).filter(t=>!e.includes(t)).map(e=>this._clientEvents.get(e)),this._clientEvents.get(void 0)].filter(V)}getAssociatedEventEmitters(e){return e?[this.buildAndCacheEventEmitterForClient(e)]:this.getUnboundEmitters()}transferListeners(e,t,r,n){var o;null==(o=this._clientEventHandlers.get(r))||o.forEach(t=>{var r;return null==(r=e.events)?void 0:r.removeHandler(...t)});const a=Object.values(A).map(e=>[e,o=>O(this,null,function*(){n.forEach(n=>{null==n||n.emit(e,d(c({},o),{clientName:r,domain:r,providerName:t.metadata.name}))}),this._apiEmitter.emit(e,d(c({},o),{clientName:r,domain:r,providerName:t.metadata.name}))})]);this._clientEventHandlers.set(r,a),a.forEach(e=>{var r;return null==(r=t.events)?void 0:r.addHandler(...e)})}close(){return O(this,null,function*(){var e,t;try{yield null==(t=null==(e=null==this?void 0:this._defaultProvider.provider)?void 0:e.onClose)?void 0:t.call(e)}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}const r=Array.from(this._domainScopedProviders);yield Promise.all(r.map(e=>O(this,[e],function*([,e]){var t,r;try{yield null==(r=null==e?void 0:(t=e.provider).onClose)?void 0:r.call(t)}catch(t){this.handleShutdownError(null==e?void 0:e.provider,t)}})))})}clearProvidersAndSetDefault(e){return O(this,null,function*(){try{yield this.close()}catch(e){this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new G(e,this._statusEnumType.NOT_READY,this._statusEnumType)}})}get allProviders(){return[...[...this._domainScopedProviders.values()].map(e=>e.provider),this._defaultProvider.provider]}handleShutdownError(e,t){this._logger.error(`Error during shutdown of provider ${e.metadata.name}: ${t}`),this._logger.error(null==t?void 0:t.stack)}}},46105(e,t,r){"use strict";r.d(t,{$W:()=>a.$W,$g:()=>a.$g,$l:()=>a.$l,B0:()=>x,Lh:()=>a.Lh,Nm:()=>a.Uc,O4:()=>a.O4,Uc:()=>a.Uc,by:()=>_,wh:()=>a.wh});var n,o,a=r(1169),i=Object.create,s=Object.defineProperty,l=Object.defineProperties,u=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=Reflect.get,v=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&v(e,r,t[r]);if(O)for(var r of O(t))f.call(t,r)&&v(e,r,t[r]);return e},b=(e,t)=>l(e,c(t)),$=(e,t,r)=>new Promise((n,o)=>{var a=e=>{try{s(r.next(e))}catch(e){o(e)}},i=e=>{try{s(r.throw(e))}catch(e){o(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())}),P=(n={"../../node_modules/eventemitter3/index.js"(e,t){var r=Object.prototype.hasOwnProperty,n="~";function o(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,r,o,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,o||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)r.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,i=new Array(a);o<a;o++)i[o]=r[o].fn;return i},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,a,i){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,a),!0;case 6:return c.fn.call(c.context,t,r,o,a,i),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var O,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,o);break;default:if(!l)for(O=1,l=new Array(d-1);O<d;O++)l[O-1]=arguments[O];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||o&&!i.once||r&&i.context!==r||s(this,a);else{for(var l=0,u=[],c=i.length;l<c;l++)(i[l].fn!==t||o&&!i[l].once||r&&i[l].context!==r)&&u.push(i[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==t&&(t.exports=l)}},function(){return o||(0,n[d(n)[0]])((o={exports:{}}).exports,o),o.exports}),y=new class{constructor(){this.metadata={name:"No-op Provider"}}resolveBooleanEvaluation(e,t){return this.noOp(t)}resolveStringEvaluation(e,t){return this.noOp(t)}resolveNumberEvaluation(e,t){return this.noOp(t)}resolveObjectEvaluation(e,t){return this.noOp(t)}noOp(e){return{value:e,reason:"No-op"}}},E=((e,t,r)=>(r=null!=e?i(h(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of d(t))p.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=u(t,o))||n.enumerable});return e})(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(P(),1),_=class extends a.sN{constructor(){super(),this.eventEmitter=new E.default}},w=(a.Lh,a.qr,a.X3,a.sP,class{constructor(e,t,r,n,o,a,i){this.providerAccessor=e,this.providerStatusAccessor=t,this.emitterAccessor=r,this.apiContextAccessor=n,this.apiHooksAccessor=o,this.globalLogger=a,this.options=i,this._hooks=[]}get metadata(){var e,t;return{name:null!=(e=this.options.domain)?e:this.options.name,domain:null!=(t=this.options.domain)?t:this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(e,t,r){var n;this.emitterAccessor().addHandler(e,t);if((0,a._e)(e,this.providerStatus))try{t({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this.emitterAccessor().removeHandler(e,t)}getHandlers(e){return this.emitterAccessor().getHandlers(e)}setLogger(e){return this._clientLogger=new a.qM(e),this}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(e,t,r){return this.getBooleanDetails(e,t,r).value}getBooleanDetails(e,t,r){return this.evaluate(e,this._provider.resolveBooleanEvaluation,t,"boolean",r)}getStringValue(e,t,r){return this.getStringDetails(e,t,r).value}getStringDetails(e,t,r){return this.evaluate(e,this._provider.resolveStringEvaluation,t,"string",r)}getNumberValue(e,t,r){return this.getNumberDetails(e,t,r).value}getNumberDetails(e,t,r){return this.evaluate(e,this._provider.resolveNumberEvaluation,t,"number",r)}getObjectValue(e,t,r){return this.getObjectDetails(e,t,r).value}getObjectDetails(e,t,r){return this.evaluate(e,this._provider.resolveObjectEvaluation,t,"object",r)}track(e,t={}){var r,n,o;try{if(this.shortCircuitIfNotReady(),"function"==typeof this._provider.track){const a=Object.freeze(g({},this.apiContextAccessor(null==(r=null==this?void 0:this.options)?void 0:r.domain)));return null==(o=(n=this._provider).track)?void 0:o.call(n,e,a,t)}this._logger.debug("Provider does not support the track function; will no-op.")}catch(e){this._logger.debug("Error recording tracking event.",e)}}evaluate(e,t,r,n,o={}){var i,s;const l=[...this.apiHooksAccessor(),...this.getHooks(),...o.hooks||[],...this._provider.hooks||[]],u=[...l].reverse(),c=g({},this.apiContextAccessor(null==(i=null==this?void 0:this.options)?void 0:i.domain)),d=u.map(()=>Object.freeze({flagKey:e,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:this._provider.metadata,context:c,logger:this._logger,hookData:new a.eD}));let O;try{this.beforeHooks(l,d,o),this.shortCircuitIfNotReady();const n=t.call(this._provider,e,r,c,this._logger),i=b(g({},n),{flagMetadata:Object.freeze(null!=(s=n.flagMetadata)?s:{}),flagKey:e});if(i.errorCode){const t=(0,a.l6)(i.errorCode,i.errorMessage);this.errorHooks(u,d,t,o),O=this.getErrorEvaluationDetails(e,r,t,i.flagMetadata)}else this.afterHooks(u,d,i,o),O=i}catch(t){this.errorHooks(u,d,t,o),O=this.getErrorEvaluationDetails(e,r,t)}return this.finallyHooks(u,d,O,o),O}beforeHooks(e,t,r){var n;for(const[o,a]of e.entries()){const i=t[e.length-1-o];Object.freeze(i),Object.freeze(i.context),null==(n=null==a?void 0:a.before)||n.call(a,i,Object.freeze(r.hookHints))}}afterHooks(e,t,r,n){var o;for(const[a,i]of e.entries()){const e=t[a];null==(o=null==i?void 0:i.after)||o.call(i,e,r,n.hookHints)}}errorHooks(e,t,r,n){var o;for(const[a,i]of e.entries())try{const e=t[a];null==(o=null==i?void 0:i.error)||o.call(i,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'error' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}finallyHooks(e,t,r,n){var o;for(const[a,i]of e.entries())try{const e=t[a];null==(o=null==i?void 0:i.finally)||o.call(i,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'finally' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}shortCircuitIfNotReady(){if(this.providerStatus===a.$l.NOT_READY)throw new a._V("provider has not yet initialized");if(this.providerStatus===a.$l.FATAL)throw new a.wh("provider is in an irrecoverable error state")}getErrorEvaluationDetails(e,t,r,n={}){const o=null==r?void 0:r.message;return{errorCode:(null==r?void 0:r.code)||a.O4.GENERAL,errorMessage:o,value:t,reason:a.$W.ERROR,flagMetadata:Object.freeze(n),flagKey:e}}}),R=Symbol.for("@openfeature/web-sdk/api"),Q=globalThis,x=class e extends a.g7{constructor(){super("client"),this._statusEnumType=a.$l,this._apiEmitter=new _,this._defaultProvider=new a.VL(y,a.$l.NOT_READY,this._statusEnumType),this._domainScopedProviders=new Map,this._createEventEmitter=()=>new _}static getInstance(){const t=Q[R];if(t)return t;const r=new e;return Q[R]=r,r}getProviderStatus(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.status)?r:this._defaultProvider.status}setProviderAndWait(e,t,r){return $(this,null,function*(){const n=(0,a.j)(e),o=n?(0,a.XD)(t):(0,a.XD)(e),i=n?(0,a.XD)(r):(0,a.XD)(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i),yield this.setAwaitableProvider(n,o)})}setProvider(e,t,r){const n=(0,a.j)(e),o=n?(0,a.XD)(t):(0,a.XD)(e),i=n?(0,a.XD)(r):(0,a.XD)(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i);const s=this.setAwaitableProvider(n,o);return Promise.resolve(s).catch(e=>{this._logger.error("Error during provider initialization:",e)}),this}getProvider(e){return this.getProviderForClient(e)}setContext(e,t){return $(this,null,function*(){var r,n;const o=(0,a.j)(e),i=null!=(n=null!=(r=(0,a.XD)(e))?r:(0,a.XD)(t))?n:{};if(o){const e=this._domainScopedProviders.get(o);if(e){const t=this.getContext(o);this._domainScopedContext.set(o,i),yield this.runProviderContextChangeHandler(o,e,t,i)}else this._domainScopedContext.set(o,i)}else{const e=this._context;this._context=i;const t=Array.from(this._domainScopedProviders.entries()).filter(([e])=>!this._domainScopedContext.has(e)).reduce((e,[t,r])=>(e.push({domain:t,wrapper:r}),e),[]),r=[{domain:void 0,wrapper:this._defaultProvider},...t];yield Promise.all(r.map(t=>this.runProviderContextChangeHandler(t.domain,t.wrapper,e,i)))}})}getContext(e){const t=(0,a.j)(e);if(t){const e=this._domainScopedContext.get(t);if(e)return e;this._logger.debug(`Unable to find context for '${t}'.`)}return this._context}clearContext(e){return $(this,null,function*(){const t=(0,a.j)(e);if(!t)return this.setContext({});{const e=this._domainScopedProviders.get(t);if(e){const r=this.getContext(t);this._domainScopedContext.delete(t);const n=this.getContext();yield this.runProviderContextChangeHandler(t,e,r,n)}else this._domainScopedContext.delete(t)}})}clearContexts(){return $(this,null,function*(){yield this.clearContext(),yield Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))})}getClient(e,t){return new w(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),e=>this.getContext(e),()=>this.getHooks(),()=>this._logger,{domain:e,version:t})}clearProviders(){return $(this,null,function*(){var t,r,n;yield(t=e.prototype,r=this,n="clearProvidersAndSetDefault",m(h(t),n,r)).call(this,y),this._domainScopedContext.clear()})}runProviderContextChangeHandler(e,t,r,n){return $(this,null,function*(){var o,i,s,l,u,c;const d=(null==(i=null==(o=t.provider)?void 0:o.metadata)?void 0:i.name)||"unnamed-provider";try{if("function"==typeof t.provider.onContextChange){const o=t.provider.onContextChange(r,n);o&&"function"==typeof(null==o?void 0:o.then)&&(t.incrementPendingContextChanges(),t.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(a.Uc.Reconciling,{domain:e,providerName:d})}),null==(s=this._apiEmitter)||s.emit(a.Uc.Reconciling,{domain:e,providerName:d}),yield o,t.decrementPendingContextChanges())}t.status=this._statusEnumType.READY,t.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(a.Uc.ContextChanged,{clientName:e,domain:e,providerName:d})}),null==(l=this._apiEmitter)||l.emit(a.Uc.ContextChanged,{clientName:e,domain:e,providerName:d}))}catch(r){if(t.decrementPendingContextChanges(),t.status=this._statusEnumType.ERROR,t.allContextChangesSettled){const t=`Error running ${d}'s context change handler: ${null==r?void 0:r.message}`;null==(u=this._logger)||u.error(`${t}`,r),this.getAssociatedEventEmitters(e).forEach(r=>{null==r||r.emit(a.Uc.Error,{clientName:e,domain:e,providerName:d,message:t})}),null==(c=this._apiEmitter)||c.emit(a.Uc.Error,{clientName:e,domain:e,providerName:d,message:t})}}})}}.getInstance()},96165(e,t,r){"use strict";r.d(t,{w:()=>l});var n=r(85959);const o="undefined"!=typeof document?n.useLayoutEffect:()=>{};var a;const i=null!==(a=n.useInsertionEffect)&&void 0!==a?a:o;function s(e){const t=(0,n.useRef)(null);return i(()=>{t.current=e},[e]),(0,n.useCallback)((...e)=>{const r=t.current;return null==r?void 0:r(...e)},[])}function l(e){const{ref:t,box:r,onResize:o}=e;let a=s(o);(0,n.useEffect)(()=>{let e=null==t?void 0:t.current;if(e){if(void 0===window.ResizeObserver)return window.addEventListener("resize",a,!1),()=>{window.removeEventListener("resize",a,!1)};{const t=new window.ResizeObserver(e=>{e.length&&a()});return t.observe(e,{box:r}),()=>{e&&t.unobserve(e)}}}},[t,r])}},91719(e,t,r){"use strict";r.d(t,{A:()=>a});const n=[],o=[];function a(e,t,r){if(e===t)return 0;const a=r?.maxDistance,i=e;e.length>t.length&&(e=t,t=i);let s=e.length,l=t.length;for(;s>0&&e.charCodeAt(~-s)===t.charCodeAt(~-l);)s--,l--;let u,c,d,O,h=0;for(;h<s&&e.charCodeAt(h)===t.charCodeAt(h);)h++;if(s-=h,l-=h,void 0!==a&&l-s>a)return a;if(0===s)return void 0!==a&&l>a?a:l;let p=0,f=0;for(;p<s;)o[p]=e.charCodeAt(h+p),n[p]=++p;for(;f<l;){for(u=t.charCodeAt(h+f),d=f++,c=f,p=0;p<s;p++)O=u===o[p]?d:d+1,d=n[p],c=n[p]=d>c?O>c?c+1:O:O>d?d+1:O;if(void 0!==a){let e=c;for(p=0;p<s;p++)n[p]<e&&(e=n[p]);if(e>a)return a}}return n.length=s,o.length=s,void 0!==a&&c>a?a:c}},46845(e,t,r){"use strict";r.d(t,{g:()=>i});class n{value;next;constructor(e){this.value=e}}class o{#e;#t;#r;constructor(){this.clear()}enqueue(e){const t=new n(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#r++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#r--,this.#e||(this.#t=void 0),e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#r=0}get size(){return this.#r}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}*drain(){for(;this.#e;)yield this.dequeue()}}function a(e){let t=!1;if("object"==typeof e&&({concurrency:e,rejectOnClear:t=!1}=e),s(e),"boolean"!=typeof t)throw new TypeError("Expected `rejectOnClear` to be a boolean");const r=new o;let n=0;const a=()=>{n<e&&r.size>0&&(n++,r.dequeue().run())},i=async(e,t,r)=>{const o=(async()=>e(...r))();t(o);try{await o}catch{}n--,a()},l=(t,...o)=>new Promise((s,l)=>{((t,o,s,l)=>{const u={reject:s};new Promise(e=>{u.run=e,r.enqueue(u)}).then(i.bind(void 0,t,o,l)),n<e&&a()})(t,s,l,o)});return Object.defineProperties(l,{activeCount:{get:()=>n},pendingCount:{get:()=>r.size},clearQueue:{value(){if(!t)return void r.clear();const e=AbortSignal.abort().reason;for(;r.size>0;)r.dequeue().reject(e)}},concurrency:{get:()=>e,set(t){s(t),e=t,queueMicrotask(()=>{for(;n<e&&r.size>0;)a()})}},map:{async value(e,t){const r=Array.from(e,(e,r)=>this(t,e,r));return Promise.all(r)}}}),l}function i(e,t){const r=a(t);return(...t)=>r(()=>e(...t))}function s(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}},66767(e,t,r){"use strict";r.d(t,{A:()=>u});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const a=new Uint8Array(16);const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function s(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}function l(e,t,r){const n=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(a)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return s(n)}const u=function(e,t,r){return!n.randomUUID||t||e?l(e,t,r):n.randomUUID()}}}]);
//# sourceMappingURL=497.js.map?_cache=ce4a6b3a266dbe42c013